{"ast":null,"code":"/* Version: 4.0.3 - May 16, 2023 18:20:11 */\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nfunction __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n}\nfunction __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\nfunction __generator(thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function () {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n}\nfunction __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\n\n// Older browsers don't support event options, feature detect it.\n\n// Adopted and modified solution from Bohdan Didukh (2017)\n// https://stackoverflow.com/questions/41594997/ios-10-safari-prevent-scrolling-behind-a-fixed-overlay-and-maintain-scroll-posi\n\nvar hasPassiveEvents = false;\nif (typeof window !== 'undefined') {\n  var passiveTestOptions = {\n    get passive() {\n      hasPassiveEvents = true;\n      return undefined;\n    }\n  };\n  window.addEventListener('testPassive', null, passiveTestOptions);\n  window.removeEventListener('testPassive', null, passiveTestOptions);\n}\nvar isIosDevice = typeof window !== 'undefined' && window.navigator && window.navigator.platform && (/iP(ad|hone|od)/.test(window.navigator.platform) || window.navigator.platform === 'MacIntel' && window.navigator.maxTouchPoints > 1);\nvar locks = [];\nvar documentListenerAdded = false;\nvar initialClientY = -1;\nvar previousBodyOverflowSetting = void 0;\nvar previousBodyPaddingRight = void 0;\n\n// returns true if `el` should be allowed to receive touchmove events.\nvar allowTouchMove = function allowTouchMove(el) {\n  return locks.some(function (lock) {\n    if (lock.options.allowTouchMove && lock.options.allowTouchMove(el)) {\n      return true;\n    }\n    return false;\n  });\n};\nvar preventDefault = function preventDefault(rawEvent) {\n  var e = rawEvent || window.event;\n\n  // For the case whereby consumers adds a touchmove event listener to document.\n  // Recall that we do document.addEventListener('touchmove', preventDefault, { passive: false })\n  // in disableBodyScroll - so if we provide this opportunity to allowTouchMove, then\n  // the touchmove event on document will break.\n  if (allowTouchMove(e.target)) {\n    return true;\n  }\n\n  // Do not prevent if the event has more than one touch (usually meaning this is a multi touch gesture like pinch to zoom).\n  if (e.touches.length > 1) return true;\n  if (e.preventDefault) e.preventDefault();\n  return false;\n};\nvar setOverflowHidden = function setOverflowHidden(options) {\n  // If previousBodyPaddingRight is already set, don't set it again.\n  if (previousBodyPaddingRight === undefined) {\n    var _reserveScrollBarGap = !!options && options.reserveScrollBarGap === true;\n    var scrollBarGap = window.innerWidth - document.documentElement.clientWidth;\n    if (_reserveScrollBarGap && scrollBarGap > 0) {\n      previousBodyPaddingRight = document.body.style.paddingRight;\n      document.body.style.paddingRight = scrollBarGap + 'px';\n    }\n  }\n\n  // If previousBodyOverflowSetting is already set, don't set it again.\n  if (previousBodyOverflowSetting === undefined) {\n    previousBodyOverflowSetting = document.body.style.overflow;\n    document.body.style.overflow = 'hidden';\n  }\n};\nvar restoreOverflowSetting = function restoreOverflowSetting() {\n  if (previousBodyPaddingRight !== undefined) {\n    document.body.style.paddingRight = previousBodyPaddingRight;\n\n    // Restore previousBodyPaddingRight to undefined so setOverflowHidden knows it\n    // can be set again.\n    previousBodyPaddingRight = undefined;\n  }\n  if (previousBodyOverflowSetting !== undefined) {\n    document.body.style.overflow = previousBodyOverflowSetting;\n\n    // Restore previousBodyOverflowSetting to undefined\n    // so setOverflowHidden knows it can be set again.\n    previousBodyOverflowSetting = undefined;\n  }\n};\n\n// https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollHeight#Problems_and_solutions\nvar isTargetElementTotallyScrolled = function isTargetElementTotallyScrolled(targetElement) {\n  return targetElement ? targetElement.scrollHeight - targetElement.scrollTop <= targetElement.clientHeight : false;\n};\nvar handleScroll = function handleScroll(event, targetElement) {\n  var clientY = event.targetTouches[0].clientY - initialClientY;\n  if (allowTouchMove(event.target)) {\n    return false;\n  }\n  if (targetElement && targetElement.scrollTop === 0 && clientY > 0) {\n    // element is at the top of its scroll.\n    return preventDefault(event);\n  }\n  if (isTargetElementTotallyScrolled(targetElement) && clientY < 0) {\n    // element is at the bottom of its scroll.\n    return preventDefault(event);\n  }\n  event.stopPropagation();\n  return true;\n};\nvar disableBodyScroll = function disableBodyScroll(targetElement, options) {\n  // targetElement must be provided\n  if (!targetElement) {\n    // eslint-disable-next-line no-console\n    console.error('disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.');\n    return;\n  }\n\n  // disableBodyScroll must not have been called on this targetElement before\n  if (locks.some(function (lock) {\n    return lock.targetElement === targetElement;\n  })) {\n    return;\n  }\n  var lock = {\n    targetElement: targetElement,\n    options: options || {}\n  };\n  locks = [].concat(_toConsumableArray(locks), [lock]);\n  if (isIosDevice) {\n    targetElement.ontouchstart = function (event) {\n      if (event.targetTouches.length === 1) {\n        // detect single touch.\n        initialClientY = event.targetTouches[0].clientY;\n      }\n    };\n    targetElement.ontouchmove = function (event) {\n      if (event.targetTouches.length === 1) {\n        // detect single touch.\n        handleScroll(event, targetElement);\n      }\n    };\n    if (!documentListenerAdded) {\n      document.addEventListener('touchmove', preventDefault, hasPassiveEvents ? {\n        passive: false\n      } : undefined);\n      documentListenerAdded = true;\n    }\n  } else {\n    setOverflowHidden(options);\n  }\n};\nvar clearAllBodyScrollLocks = function clearAllBodyScrollLocks() {\n  if (isIosDevice) {\n    // Clear all locks ontouchstart/ontouchmove handlers, and the references.\n    locks.forEach(function (lock) {\n      lock.targetElement.ontouchstart = null;\n      lock.targetElement.ontouchmove = null;\n    });\n    if (documentListenerAdded) {\n      document.removeEventListener('touchmove', preventDefault, hasPassiveEvents ? {\n        passive: false\n      } : undefined);\n      documentListenerAdded = false;\n    }\n\n    // Reset initial clientY.\n    initialClientY = -1;\n  } else {\n    restoreOverflowSetting();\n  }\n  locks = [];\n};\nvar baseWidgetUrl = 'https://buy.ramp.network/';\nvar SEND_CRYPTO_SUPPORTED_VERSION = 1;\n// It will be evaluated by rollup-plugin-version-injector\nvar SDK_VERSION = '4.0.3';\nvar PaymentMethodName;\n(function (PaymentMethodName) {\n  PaymentMethodName[\"MANUAL_BANK_TRANSFER\"] = \"MANUAL_BANK_TRANSFER\";\n  PaymentMethodName[\"AUTO_BANK_TRANSFER\"] = \"AUTO_BANK_TRANSFER\";\n  PaymentMethodName[\"CARD_PAYMENT\"] = \"CARD_PAYMENT\";\n  PaymentMethodName[\"APPLE_PAY\"] = \"APPLE_PAY\";\n})(PaymentMethodName || (PaymentMethodName = {}));\nvar PurchaseStatus;\n(function (PurchaseStatus) {\n  PurchaseStatus[\"INITIALIZED\"] = \"INITIALIZED\";\n  PurchaseStatus[\"PAYMENT_STARTED\"] = \"PAYMENT_STARTED\";\n  PurchaseStatus[\"PAYMENT_IN_PROGRESS\"] = \"PAYMENT_IN_PROGRESS\";\n  PurchaseStatus[\"PAYMENT_FAILED\"] = \"PAYMENT_FAILED\";\n  PurchaseStatus[\"PAYMENT_EXECUTED\"] = \"PAYMENT_EXECUTED\";\n  PurchaseStatus[\"FIAT_RECEIVED\"] = \"FIAT_RECEIVED\";\n  PurchaseStatus[\"FIAT_SENT\"] = \"FIAT_SENT\";\n  PurchaseStatus[\"EXPIRED\"] = \"EXPIRED\";\n  PurchaseStatus[\"CANCELLED\"] = \"CANCELLED\";\n  PurchaseStatus[\"RELEASING\"] = \"RELEASING\";\n  PurchaseStatus[\"RELEASED\"] = \"RELEASED\";\n})(PurchaseStatus || (PurchaseStatus = {}));\nvar EventSeverity;\n(function (EventSeverity) {\n  EventSeverity[\"VERBOSE\"] = \"VERBOSE\";\n  EventSeverity[\"DEBUG\"] = \"DEBUG\";\n  EventSeverity[\"INFO\"] = \"INFO\";\n  EventSeverity[\"WARNING\"] = \"WARNING\";\n  EventSeverity[\"ERROR\"] = \"ERROR\";\n  EventSeverity[\"CRITICAL\"] = \"CRITICAL\";\n})(EventSeverity || (EventSeverity = {}));\nvar WidgetEventTypes;\n(function (WidgetEventTypes) {\n  WidgetEventTypes[\"WIDGET_CLOSE\"] = \"WIDGET_CLOSE\";\n  WidgetEventTypes[\"WIDGET_CONFIG_DONE\"] = \"WIDGET_CONFIG_DONE\";\n  WidgetEventTypes[\"WIDGET_CONFIG_FAILED\"] = \"WIDGET_CONFIG_FAILED\";\n  WidgetEventTypes[\"PURCHASE_CREATED\"] = \"PURCHASE_CREATED\";\n  WidgetEventTypes[\"OFFRAMP_SALE_CREATED\"] = \"OFFRAMP_SALE_CREATED\";\n})(WidgetEventTypes || (WidgetEventTypes = {}));\nvar InternalEventTypes;\n(function (InternalEventTypes) {\n  InternalEventTypes[\"WIDGET_CLOSE_REQUEST\"] = \"WIDGET_CLOSE_REQUEST\";\n  InternalEventTypes[\"WIDGET_CLOSE_REQUEST_CANCELLED\"] = \"WIDGET_CLOSE_REQUEST_CANCELLED\";\n  InternalEventTypes[\"WIDGET_CLOSE_REQUEST_CONFIRMED\"] = \"WIDGET_CLOSE_REQUEST_CONFIRMED\";\n  InternalEventTypes[\"REQUEST_CRYPTO_ACCOUNT\"] = \"REQUEST_CRYPTO_ACCOUNT\";\n  InternalEventTypes[\"SEND_CRYPTO\"] = \"SEND_CRYPTO\";\n})(InternalEventTypes || (InternalEventTypes = {}));\nvar InternalSdkEventTypes;\n(function (InternalSdkEventTypes) {\n  InternalSdkEventTypes[\"REQUEST_CRYPTO_ACCOUNT_RESULT\"] = \"REQUEST_CRYPTO_ACCOUNT_RESULT\";\n  InternalSdkEventTypes[\"SEND_CRYPTO_RESULT\"] = \"SEND_CRYPTO_RESULT\";\n})(InternalSdkEventTypes || (InternalSdkEventTypes = {}));\nfunction getRandomIntString() {\n  try {\n    return String(crypto.getRandomValues(new Uint32Array(1))[0]);\n  } catch (_a) {\n    // if `crypto` is not supported, fall back to Math.random\n    // tslint:disable-next-line:no-magic-numbers\n    return String(Math.floor(Math.random() * 10000000));\n  }\n}\nvar widgetDesktopWidth = 895;\nvar widgetDesktopHeight = 590;\nvar minWidgetMobileWidth = 320;\nvar minWidgetMobileHeight = 667;\nfunction normalizeConfigAndLogErrorsOnInvalidFields(config) {\n  var errors = [];\n  var configCopy = __assign({}, config);\n  if (!['desktop', 'mobile', 'hosted-desktop', 'hosted-mobile', 'hosted-auto', 'auto', 'embedded-desktop', 'embedded-mobile'].includes(config.variant)) {\n    configCopy.variant = 'desktop';\n    errors.push({\n      fieldName: 'variant',\n      description: 'Invalid value for `variant` config field ',\n      exampleValue: \"'desktop'\",\n      severity: EventSeverity.WARNING\n    });\n  }\n  if (config.variant === 'embedded-desktop' || config.variant === 'embedded-mobile') {\n    validateContainerNode(config.containerNode, config.variant);\n  }\n  if (!['embedded-desktop', 'embedded-mobile'].includes(configCopy.variant)) {\n    delete configCopy.containerNode;\n  }\n  if (typeof config.useSendCryptoCallback !== 'undefined') {\n    delete config.useSendCryptoCallback;\n  }\n  logErrors(errors);\n  return configCopy;\n}\nfunction logErrors(errors) {\n  if (!errors.length) {\n    return;\n  }\n  // tslint:disable:no-console\n  console.group('Config errors');\n  errors.forEach(function (error) {\n    console.group(error.fieldName);\n    console.log(error.description);\n    console.log(\"Example expected value: \".concat(error.exampleValue));\n    console.log(\"Severity: \".concat(error.severity));\n    console.groupEnd();\n  });\n  console.groupEnd();\n  // tslint:enable:no-console\n}\n\nfunction initEventListenersDict() {\n  var widgetEventTypes = Array.from(Object.values(WidgetEventTypes));\n  var internalEventTypes = Array.from(Object.values(InternalEventTypes));\n  return __spreadArray(__spreadArray([], widgetEventTypes, true), internalEventTypes, true).reduce(function (listenersDict, eventType) {\n    listenersDict[eventType] = [];\n    return listenersDict;\n  }, {});\n}\nfunction determineWidgetVariant(config) {\n  var _a;\n  var mediaQuery = '(min-width: 920px) and (min-height: 630px)';\n  var variant = (_a = config.variant) === null || _a === void 0 ? void 0 : _a.toLocaleLowerCase();\n  if (variant === 'mobile' || variant === 'desktop' || variant === 'hosted-mobile' || variant === 'hosted-desktop' || variant === 'embedded-desktop' || variant === 'embedded-mobile') {\n    return variant;\n  }\n  var isDesktop = window.matchMedia(mediaQuery).matches;\n  if (variant === 'hosted-auto') {\n    return isDesktop ? 'hosted-desktop' : 'hosted-mobile';\n  }\n  return isDesktop ? 'desktop' : 'mobile';\n}\nfunction isHtmlElement(element) {\n  return typeof element.blur === 'function';\n}\nfunction validateContainerNode(containerNode, variant) {\n  if (!document.body) {\n    throw new Error(\"Couldn't find <body> element.\");\n  }\n  if (!(containerNode instanceof HTMLElement)) {\n    throw new Error('Container node has to be a proper HTML element.');\n  }\n  if (!document.body.contains(containerNode)) {\n    throw new Error('Container node must be attached to the document.');\n  }\n  var _a = containerNode.getBoundingClientRect(),\n    width = _a.width,\n    height = _a.height;\n  if (variant === 'embedded-desktop') {\n    if (width + 1 < widgetDesktopWidth) {\n      throw new Error(\"Container node must be at least \".concat(widgetDesktopWidth, \"px wide.\"));\n    }\n    if (height + 1 < widgetDesktopHeight) {\n      throw new Error(\"Container node must be at least \".concat(widgetDesktopHeight, \"px tall.\"));\n    }\n  } else if (variant === 'embedded-mobile') {\n    if (width + 1 < minWidgetMobileWidth) {\n      throw new Error(\"Container node must be at least \".concat(minWidgetMobileWidth, \"px wide.\"));\n    }\n    if (height + 1 < minWidgetMobileHeight) {\n      throw new Error(\"Container node must be at least \".concat(minWidgetMobileHeight, \"px tall.\"));\n    }\n  }\n}\nfunction getBaseUrl(config) {\n  return new URL(config.url || baseWidgetUrl);\n}\nfunction initWidgetIframeUrl(config) {\n  var baseUrl = getBaseUrl(config);\n  var hostUrl = window.location.origin;\n  config.containerNode;\n  config.url;\n  var configWithoutIframeUrl = __rest(config, [\"containerNode\", \"url\"]);\n  var preparedConfig = __assign(__assign({}, configWithoutIframeUrl), {\n    hostUrl: hostUrl\n  });\n  Object.entries(preparedConfig).forEach(function (_a) {\n    var key = _a[0],\n      value = _a[1];\n    if (value) {\n      baseUrl.searchParams.append(key, Array.isArray(value) ? value.join(',') : value.toString());\n    }\n  });\n  return baseUrl.toString();\n}\nfunction hideWebsiteBelow(parent, containerWidth) {\n  var backgroundWebsiteHider = document.createElement('div');\n  backgroundWebsiteHider.classList.add('background-hider');\n  if (containerWidth) {\n    backgroundWebsiteHider.style.maxWidth = \"\".concat(containerWidth, \"px\");\n  }\n  parent.appendChild(backgroundWebsiteHider);\n}\nfunction initDOMNodeWithOverlay(url, dispatch, config) {\n  var body = document.querySelector('body');\n  var shadowHost = document.createElement('div');\n  shadowHost.style.width = '100%';\n  shadowHost.style.height = '100%';\n  var shadow = shadowHost.attachShadow({\n    mode: 'open'\n  });\n  shadow.appendChild(getStylesForShadowDom(config.variant));\n  var iframe = prepareIframeNode(url, config.variant);\n  var overlay = prepareOverlayNode(iframe, dispatch);\n  overlay.appendChild(iframe);\n  shadow.appendChild(overlay);\n  return {\n    body: body,\n    iframe: iframe,\n    overlay: overlay,\n    shadow: shadow,\n    shadowHost: shadowHost\n  };\n}\nfunction initDOMNodeWithoutOverlay(url, _dispatch, config) {\n  var body = document.querySelector('body');\n  var shadowHost = document.createElement('div');\n  shadowHost.style.width = '100%';\n  shadowHost.style.height = '100%';\n  var shadow = shadowHost.attachShadow({\n    mode: 'open'\n  });\n  var container = document.createElement('div');\n  container.classList.add('embedded-container');\n  shadow.appendChild(container);\n  var loader = document.createElement('div');\n  loader.classList.add('loader-container');\n  // tslint:disable:max-line-length\n  loader.innerHTML = \"\\n    <svg width=\\\"92\\\" height=\\\"60\\\" viewBox=\\\"0 0 51 32\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" class=\\\"loader\\\">\\n      <path d=\\\"M16.2232 18.8309L22.282 24.912C22.7953 25.4272 22.7948 26.2647 22.281 26.7792L17.651 31.4158C16.8619 32.1947 15.5719 32.1947 14.7828 31.4158L0.591812 17.4093C-0.197271 16.6305 -0.197271 15.3571 0.591812 14.5783L14.7828 0.584122C15.5719 -0.194707 16.8619 -0.194707 17.651 0.584122L22.281 5.22078C22.7948 5.73535 22.7953 6.57281 22.282 7.08795L16.2232 13.1691C14.645 14.7267 14.645 17.2733 16.2232 18.8309Z\\\" fill=\\\"#21BF73\\\"></path>\\n      <path d=\\\"M34.4433 18.8309L28.3845 24.912C27.8712 25.4272 27.8717 26.2647 28.3855 26.7792L33.0155 31.4158C33.8046 32.1947 35.0946 32.1947 35.8837 31.4158L50.0747 17.4093C50.8638 16.6305 50.8638 15.3571 50.0747 14.5783L35.8837 0.584122C35.0946 -0.194707 33.8046 -0.194707 33.0155 0.584122L28.3855 5.22078C27.8717 5.73535 27.8712 6.57281 28.3845 7.08795L34.4433 13.1691C36.0215 14.7267 36.0215 17.2733 34.4433 18.8309Z\\\" fill=\\\"#0A6E5C\\\"></path>\\n      <path d=\\\"M17.8128 17.157C17.1737 16.518 17.1737 15.482 17.8128 14.843L24.1765 8.47926C24.8155 7.84025 25.8515 7.84025 26.4905 8.47926L32.8542 14.843C33.4932 15.482 33.4932 16.518 32.8542 17.157L26.4905 23.5207C25.8515 24.1598 24.8155 24.1598 24.1765 23.5207L17.8128 17.157Z\\\" fill=\\\"#21BF73\\\"></path>\\n    </svg>\";\n  // tslint:enable:max-line-length\n  container.appendChild(loader);\n  shadow.appendChild(getStylesForShadowDom(config.variant));\n  var iframe = prepareIframeNode(url, config.variant, config.containerNode);\n  container.appendChild(iframe);\n  return {\n    body: body,\n    iframe: iframe,\n    overlay: null,\n    shadow: shadow,\n    shadowHost: shadowHost\n  };\n}\nfunction importFonts() {\n  if (document.querySelector('[data-ramp-font]')) {\n    return;\n  }\n  var font = document.createElement('link');\n  font.setAttribute('href', 'https://fonts.googleapis.com/css?family=Poppins:200,400,500,600,700&display=swap&subset=latin-ext');\n  font.setAttribute('rel', 'stylesheet');\n  font.setAttribute('data-ramp-font', '');\n  document.head.appendChild(font);\n}\nfunction prepareIframeNode(url, variant, containerNode) {\n  var iframe = document.createElement('iframe');\n  iframe.setAttribute('src', url);\n  if (containerNode) {\n    iframe.setAttribute('width', variant === 'desktop' || variant === 'embedded-desktop' ? widgetDesktopWidth.toString() : containerNode.getBoundingClientRect().width.toString());\n    iframe.setAttribute('height', variant === 'desktop' || variant === 'embedded-desktop' ? widgetDesktopHeight.toString() : containerNode.getBoundingClientRect().height.toString());\n  } else {\n    iframe.setAttribute('width', variant === 'desktop' || variant === 'embedded-desktop' ? widgetDesktopWidth.toString() : window.innerWidth.toString());\n    iframe.setAttribute('height', variant === 'desktop' || variant === 'embedded-desktop' ? widgetDesktopHeight.toString() : window.innerHeight.toString());\n  }\n  iframe.setAttribute('allow', 'payment; microphone; camera; clipboard-read; clipboard-write');\n  iframe.classList.add('iframe');\n  return iframe;\n}\nfunction prepareOverlayNode(iframe, dispatch) {\n  var overlay = document.createElement('div');\n  overlay.classList.add('overlay');\n  var loader = document.createElement('div');\n  loader.classList.add('loader-container');\n  // tslint:disable:max-line-length\n  loader.innerHTML = \"\\n    <svg width=\\\"92\\\" height=\\\"60\\\" viewBox=\\\"0 0 51 32\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" class=\\\"loader\\\">\\n      <path d=\\\"M16.2232 18.8309L22.282 24.912C22.7953 25.4272 22.7948 26.2647 22.281 26.7792L17.651 31.4158C16.8619 32.1947 15.5719 32.1947 14.7828 31.4158L0.591812 17.4093C-0.197271 16.6305 -0.197271 15.3571 0.591812 14.5783L14.7828 0.584122C15.5719 -0.194707 16.8619 -0.194707 17.651 0.584122L22.281 5.22078C22.7948 5.73535 22.7953 6.57281 22.282 7.08795L16.2232 13.1691C14.645 14.7267 14.645 17.2733 16.2232 18.8309Z\\\" fill=\\\"#21BF73\\\"></path>\\n      <path d=\\\"M34.4433 18.8309L28.3845 24.912C27.8712 25.4272 27.8717 26.2647 28.3855 26.7792L33.0155 31.4158C33.8046 32.1947 35.0946 32.1947 35.8837 31.4158L50.0747 17.4093C50.8638 16.6305 50.8638 15.3571 50.0747 14.5783L35.8837 0.584122C35.0946 -0.194707 33.8046 -0.194707 33.0155 0.584122L28.3855 5.22078C27.8717 5.73535 27.8712 6.57281 28.3845 7.08795L34.4433 13.1691C36.0215 14.7267 36.0215 17.2733 34.4433 18.8309Z\\\" fill=\\\"#0A6E5C\\\"></path>\\n      <path d=\\\"M17.8128 17.157C17.1737 16.518 17.1737 15.482 17.8128 14.843L24.1765 8.47926C24.8155 7.84025 25.8515 7.84025 26.4905 8.47926L32.8542 14.843C33.4932 15.482 33.4932 16.518 32.8542 17.157L26.4905 23.5207C25.8515 24.1598 24.8155 24.1598 24.1765 23.5207L17.8128 17.157Z\\\" fill=\\\"#21BF73\\\"></path>\\n    </svg>\";\n  // tslint:enable:max-line-length\n  overlay.appendChild(loader);\n  overlay.addEventListener('click', function (event) {\n    if (event.target !== iframe && !overlay.querySelectorAll('.close-modal').length) {\n      dispatch({\n        type: InternalEventTypes.WIDGET_CLOSE_REQUEST,\n        payload: null,\n        internal: true\n      });\n    }\n  });\n  return overlay;\n}\nfunction areUrlsEqual(url0, url1) {\n  return new URL(url0).toString() === new URL(url1).toString();\n}\nfunction isCloseModalAlreadyOpen(containerNode) {\n  return containerNode.querySelectorAll('.close-modal').length !== 0;\n}\nfunction prepareCloseModalNode(dispatch) {\n  var container = document.createElement('div');\n  container.classList.add('close-modal');\n  var textEl = document.createElement('div');\n  textEl.classList.add('close-modal__text');\n  textEl.textContent = 'Are you sure you want to exit Ramp and abandon the transaction?';\n  var buttonContainer = document.createElement('div');\n  buttonContainer.classList.add('close-modal__button-container');\n  var cancelButton = document.createElement('button');\n  cancelButton.setAttribute('type', 'button');\n  cancelButton.classList.add('close-modal__button');\n  cancelButton.classList.add('close-modal__button--cancel');\n  cancelButton.textContent = 'Cancel';\n  cancelButton.addEventListener('click', function (event) {\n    event.stopPropagation();\n    dispatch({\n      type: InternalEventTypes.WIDGET_CLOSE_REQUEST_CANCELLED,\n      payload: null,\n      internal: true\n    });\n  });\n  var exitButton = document.createElement('button');\n  exitButton.setAttribute('type', 'button');\n  exitButton.classList.add('close-modal__button');\n  exitButton.classList.add('close-modal__button--exit');\n  exitButton.textContent = 'Exit';\n  exitButton.addEventListener('click', function (event) {\n    event.stopPropagation();\n    dispatch({\n      type: InternalEventTypes.WIDGET_CLOSE_REQUEST_CONFIRMED,\n      payload: null,\n      internal: true\n    });\n  });\n  buttonContainer.appendChild(cancelButton);\n  buttonContainer.appendChild(exitButton);\n  container.appendChild(textEl);\n  container.appendChild(buttonContainer);\n  return container;\n}\nfunction getStylesForShadowDom(variant) {\n  var styles = document.createElement('style');\n  var isMobile = variant === 'mobile' || variant === 'hosted-mobile' || variant === 'embedded-mobile' || variant === 'webview-mobile';\n  var isEmbedded = variant === 'embedded-mobile' || variant === 'embedded-desktop';\n  styles.textContent = \"\\n\\n    .background-hider {\\n      content: '';\\n      height: 30vh;\\n      width: 100vw;\\n      position: fixed;\\n      bottom: 0;\\n      transform: translateY(50%);\\n      background-color: #f5f8fb;\\n      z-index: 999;\\n    }\\n\\n    .overlay {\\n      position: fixed;\\n      z-index: 1000;\\n      width: 100vw;\\n      height: \".concat(isMobile ? '100%;' : '100vh;', \"\\n      top: 0;\\n      left: 0;\\n      overflow: hidden;\\n      background-color: rgba(166, 174, 185, 0.7);\\n      display: flex;\\n      flex-flow: row nowrap;\\n      justify-content: center;\\n      \").concat(isMobile ? 'align-items: flex-start;' : 'align-items: center;', \"\\n    }\\n\\n    .embedded-container {\\n      z-index: 1000;\\n      position: relative;\\n      width: 100%;\\n      height: 100%;\\n      display: flex;\\n      flex-flow: row nowrap;\\n      justify-content: center;\\n      \").concat(isMobile ? 'align-items: flex-start;' : 'align-items: center;', \"\\n      min-width: \").concat(isMobile ? minWidgetMobileWidth : widgetDesktopWidth, \"px;\\n      min-height: \").concat(isMobile ? minWidgetMobileHeight : widgetDesktopHeight, \"px;\\n    }\\n\\n    .loader-container {\\n      align-self: center;\\n    }\\n\\n    .loader {\\n      transform-origin: center;\\n      animation: logoAnimation 4s linear infinite;\\n      width: 100px;\\n      height: auto;\\n      align-self: center;\\n    }\\n\\n    .loader path:nth-child(3) {\\n      transform-origin: center;\\n      position: relative;\\n    }\\n\\n    .loader path:nth-child(1) {\\n      transform-origin: center;\\n      position: relative;\\n      animation: box1Animation 4s linear infinite;\\n      transform: scale(0.4) translateX(6px);\\n    }\\n\\n    .loader path:nth-child(2) {\\n      transform-origin: center;\\n      position: relative;\\n      animation: box4Animation 4s linear infinite;\\n      transform: scale(0.4) translateX(-6px);\\n    }\\n\\n    @keyframes logoAnimation {\\n      10% {\\n        transform: rotate(180deg);\\n      }\\n      30%{\\n        transform: rotate(360deg);\\n      }\\n      70% {\\n        transform: rotate(360deg);\\n      }\\n      90% {\\n        transform: rotate(520deg);\\n      }\\n      100% {\\n        transform: rotate(720deg);\\n      }\\n    }\\n\\n    @keyframes box1Animation {\\n      0%, 10% {\\n        transform: scale(0.4) translateX(6px);\\n      }\\n      30%, 70% {\\n        transform: scale(1) translateX(0);\\n      }\\n      90% {\\n        transform: scale(0.4) translateX(6px);\\n      }\\n    }\\n\\n\\n    @keyframes box4Animation {\\n      0%, 10% {\\n        transform: scale(0.4) translateX(-6px);\\n      }\\n      30%, 70% {\\n        transform: scale(1) translateX(0);\\n      }\\n      90% {\\n        transform: scale(0.4) translateX(-6px);\\n      }\\n    }\\n\\n    .iframe {\\n      border: none;\\n      user-select: none;\\n      visibility: hidden;\\n      position: absolute;\\n      color-scheme: only light;\\n    }\\n\\n    .iframe.visible {\\n      visibility: visible;\\n      \").concat(!isEmbedded && isMobile ? \"\\n        width: 100vw;\\n        height: 100%;\\n      \" : '', \"\\n    }\\n\\n    .close-modal {\\n      font-family: 'Poppins', sans-serif;\\n      width: 678px;\\n      height: 276px;\\n      position: absolute;\\n      left: 50%;\\n      top: 50%;\\n      transform: translate(-50%, -50%);\\n      z-index: 9999;\\n      box-shadow: 0px 54px 200px rgba(36, 37, 57, 0.2);\\n      display: flex;\\n      flex-flow: column nowrap;\\n      justify-content: flex-start;\\n      align-items: center;\\n      padding: 35px;\\n      border-radius: 8px;\\n      background: #fff;\\n\\n      box-sizing: border-box;\\n    }\\n\\n    .close-modal * {\\n      box-sizing: border-box;\\n    }\\n\\n    .close-modal__text {\\n      margin: 40px auto 30px;\\n      font-weight: 600;\\n      font-size: 24px;\\n      line-height: 36px;\\n      text-align: center;\\n\\n      color: #242539;\\n    }\\n\\n    .close-modal__button-container {\\n      width: 318px;\\n      display: flex;\\n      flex-flow: row nowrap;\\n      justify-content: space-between;\\n      align-items: center;\\n    }\\n\\n    .close-modal__button {\\n      background: #fff;\\n      border: 2px solid #EDEEF3;\\n      border-radius: 74px;\\n      width: 152px;\\n      height: 56px;\\n      cursor: pointer;\\n      font-weight: 600;\\n      font-size: 14px;\\n      line-height: 21px;\\n      color: #2B2D56;\\n      text-transform: uppercase;\\n    }\\n\\n    .close-modal__button--exit {\\n      background: #DD3E56;\\n      box-shadow: 0px 8px 34px rgba(221, 62, 86, 0.4);\\n      color: #fff;\\n      border-color: transparent;\\n    }\\n  \");\n  return styles;\n}\nvar RampInstantSDK = /** @class */function () {\n  function RampInstantSDK(config) {\n    this._listeners = initEventListenersDict();\n    this._isVisible = false;\n    this._onSendCryptoCallback = undefined;\n    importFonts();\n    this.unsubscribe = this.unsubscribe.bind(this);\n    this.on = this.on.bind(this);\n    this.show = this.show.bind(this);\n    this._handleEscapeClick = this._handleEscapeClick.bind(this);\n    this._dispatchEvent = this._dispatchEvent.bind(this);\n    this._subscribeToWidgetEvents = this._subscribeToWidgetEvents.bind(this);\n    this._on = this._on.bind(this);\n    this._registerSdkEventHandlers = this._registerSdkEventHandlers.bind(this);\n    this._subscribeToWidgetEvents = this._subscribeToWidgetEvents.bind(this);\n    this._onSendCrypto = this._onSendCrypto.bind(this);\n    this._rawNormalizedConfig = normalizeConfigAndLogErrorsOnInvalidFields(__assign({\n      variant: 'desktop'\n    }, config));\n    this._config = __assign(__assign({}, this._rawNormalizedConfig), this._getHostConfigSdkParams(this._rawNormalizedConfig, config.useSendCryptoCallback));\n  }\n  RampInstantSDK.prototype.show = function () {\n    if (this._isVisible) {\n      throw new Error('Widget is already visible - you can only call this once per instance');\n    }\n    if (document.activeElement && isHtmlElement(document.activeElement)) {\n      document.activeElement.blur();\n    }\n    this._registerSdkEventHandlers();\n    window.addEventListener('message', this._subscribeToWidgetEvents);\n    if (this._isConfiguredAsHosted()) {\n      this._showUsingHostedMode();\n    } else if (this._isConfiguredAsEmbedded()) {\n      this._showUsingEmbeddedMode();\n    } else if (this._isConfiguredWithOverlay()) {\n      this._showUsingOverlayMode();\n    }\n    window.addEventListener('keydown', this._handleEscapeClick, true);\n    return this;\n  };\n  RampInstantSDK.prototype.on = function (type, callback) {\n    this._on(type, callback, false);\n    return this;\n  };\n  RampInstantSDK.prototype.unsubscribe = function (type, callback) {\n    var _this = this;\n    if (type === '*') {\n      var allTypes = Object.entries(this._listeners);\n      allTypes.forEach(function (_a) {\n        var key = _a[0],\n          eventHandlers = _a[1];\n        var filteredHandlers = eventHandlers.filter(function (l) {\n          return l.callback !== callback;\n        });\n        _this._listeners[key] = filteredHandlers;\n      });\n    } else {\n      this._listeners[type] = this._listeners[type].filter(function (l) {\n        return l.callback !== callback;\n      });\n    }\n    return this;\n  };\n  RampInstantSDK.prototype._on = function (type, callback, internal) {\n    if (type !== '*' && !this._listeners[type]) {\n      // tslint:disable-next-line:no-console\n      console.warn(\"Unknown / unsupported event name - '\".concat(type, \"'. This listener will have no effect.\"));\n    }\n    if (type === '*') {\n      var allTypes = Object.values(this._listeners);\n      allTypes.forEach(function (eventHandlers) {\n        return eventHandlers.push({\n          callback: callback,\n          internal: internal\n        });\n      });\n    } else {\n      this._listeners[type].push({\n        callback: callback,\n        internal: internal\n      });\n    }\n  };\n  RampInstantSDK.prototype.close = function () {\n    this._dispatchEvent({\n      type: WidgetEventTypes.WIDGET_CLOSE,\n      payload: null,\n      widgetInstanceId: this._config.widgetInstanceId\n    });\n    return this;\n  };\n  RampInstantSDK.prototype.onSendCrypto = function (callback) {\n    this._onSendCryptoCallback = callback;\n    return this;\n  };\n  RampInstantSDK.prototype.onRequestCryptoAccount = function (callback) {\n    var _this = this;\n    var onRequestCryptoAccount = function (event) {\n      return __awaiter(_this, void 0, void 0, function () {\n        var result, e_1, errorMessage;\n        return __generator(this, function (_a) {\n          switch (_a.label) {\n            case 0:\n              _a.trys.push([0, 2,, 3]);\n              return [4 /*yield*/, callback(event.payload.type, event.payload.assetSymbol)];\n            case 1:\n              result = _a.sent();\n              if (!result.address) {\n                throw new Error('Missing address in the callback result');\n              }\n              return [3 /*break*/, 3];\n            case 2:\n              e_1 = _a.sent();\n              errorMessage = void 0;\n              if (typeof e_1 === 'string') {\n                errorMessage = e_1;\n              } else if (e_1 instanceof Error) {\n                errorMessage = e_1.message;\n              }\n              this._sendEventToWidget({\n                type: InternalSdkEventTypes.REQUEST_CRYPTO_ACCOUNT_RESULT,\n                payload: {\n                  error: errorMessage\n                }\n              });\n              return [2 /*return*/];\n            case 3:\n              this._sendEventToWidget({\n                type: InternalSdkEventTypes.REQUEST_CRYPTO_ACCOUNT_RESULT,\n                payload: {\n                  address: result.address,\n                  type: result.type,\n                  name: result.name,\n                  assetSymbol: result.assetSymbol\n                }\n              });\n              return [2 /*return*/];\n          }\n        });\n      });\n    };\n\n    this._on(InternalEventTypes.REQUEST_CRYPTO_ACCOUNT, onRequestCryptoAccount, true);\n    return this;\n  };\n  RampInstantSDK.prototype._subscribeToWidgetEvents = function (event) {\n    if (!event.data) {\n      return;\n    }\n    if (!areUrlsEqual(event.origin, getBaseUrl(this._config).origin)) {\n      return;\n    }\n    var eventData = event.data;\n    if (!eventData.widgetInstanceId || eventData.widgetInstanceId !== this._config.widgetInstanceId) {\n      return;\n    }\n    this._dispatchEvent(eventData);\n  };\n  RampInstantSDK.prototype._registerSdkEventHandlers = function () {\n    var _this = this;\n    this._on(WidgetEventTypes.WIDGET_CLOSE, function (_event) {\n      var _a, _b;\n      if (_this._isConfiguredAsHosted()) {\n        try {\n          (_a = _this.widgetWindow) === null || _a === void 0 ? void 0 : _a.close();\n        } catch (e) {\n          throw new Error('Could not close the widget window');\n        }\n      } else {\n        (_b = _this.domNodes) === null || _b === void 0 ? void 0 : _b.shadowHost.remove();\n        clearAllBodyScrollLocks();\n      }\n      _this._teardownEventSubscriptions();\n    }, true);\n    var onConfigEvent = function () {\n      var _a, _b;\n      if (_this._isConfiguredAsHosted()) {\n        return;\n      }\n      (_a = _this.domNodes) === null || _a === void 0 ? void 0 : _a.iframe.classList.add('visible');\n      var loader = (_b = _this.domNodes) === null || _b === void 0 ? void 0 : _b.shadow.querySelector('.loader-container');\n      if (loader) {\n        loader.remove();\n      }\n    };\n    if (this._config.useSendCryptoCallbackVersion) {\n      this.on(InternalEventTypes.SEND_CRYPTO, this._onSendCrypto);\n    }\n    this._on(WidgetEventTypes.WIDGET_CONFIG_DONE, onConfigEvent, true);\n    this._on(WidgetEventTypes.WIDGET_CONFIG_FAILED, onConfigEvent, true);\n    this._on(InternalEventTypes.WIDGET_CLOSE_REQUEST, function (_event) {\n      if (_this._isConfiguredAsHosted() || _this._isConfiguredAsEmbedded()) {\n        return;\n      }\n      if (_this._config.variant === 'mobile' || isCloseModalAlreadyOpen(_this.domNodes.overlay)) {\n        return;\n      }\n      _this.domNodes.overlay.appendChild(prepareCloseModalNode(_this._dispatchEvent));\n    }, true);\n    this._on(InternalEventTypes.WIDGET_CLOSE_REQUEST_CONFIRMED, function (_event) {\n      _this._dispatchEvent({\n        type: WidgetEventTypes.WIDGET_CLOSE,\n        payload: null,\n        widgetInstanceId: _this._config.widgetInstanceId\n      });\n    }, true);\n    this._on(InternalEventTypes.WIDGET_CLOSE_REQUEST_CANCELLED, function (_event) {\n      if (_this._isConfiguredAsHosted() || _this._isConfiguredAsEmbedded()) {\n        return;\n      }\n      var modal = _this.domNodes.overlay.querySelector('.close-modal');\n      if (modal) {\n        modal.remove();\n      }\n    }, true);\n  };\n  RampInstantSDK.prototype._sendEventToWidget = function (event) {\n    var _a, _b, _c;\n    if (!this._isVisible) {\n      throw new Error(\"Widget is not visible couldn't send the event\");\n    }\n    try {\n      (_c = (_a = this.widgetWindow) !== null && _a !== void 0 ? _a : (_b = this.domNodes) === null || _b === void 0 ? void 0 : _b.iframe.contentWindow) === null || _c === void 0 ? void 0 : _c.postMessage(event, getBaseUrl(this._config).origin);\n      // tslint:disable-next-line:no-empty\n    } catch (_d) {}\n  };\n  RampInstantSDK.prototype._dispatchEvent = function (event) {\n    var type = event.type;\n    this._listeners[type].forEach(function (handler) {\n      return handler.callback(event);\n    });\n  };\n  RampInstantSDK.prototype._handleEscapeClick = function (event) {\n    var escKeyCode = 27;\n    if (event.key === 'Escape' || event.key === 'Esc' || event.keyCode === escKeyCode) {\n      this._dispatchEvent({\n        type: InternalEventTypes.WIDGET_CLOSE_REQUEST,\n        payload: null,\n        internal: true\n      });\n    }\n  };\n  RampInstantSDK.prototype._onSendCrypto = function (event) {\n    var _a;\n    return __awaiter(this, void 0, void 0, function () {\n      var result, e_2, errorMessage;\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            if (event.eventVersion !== SEND_CRYPTO_SUPPORTED_VERSION) {\n              // tslint:disable-next-line:no-console\n              console.warn(\"unsupported event version - '\".concat(event, \"'. This listener will have no effect.\"));\n              return [2 /*return*/];\n            }\n\n            _b.label = 1;\n          case 1:\n            _b.trys.push([1, 3,, 4]);\n            return [4 /*yield*/, (_a = this._onSendCryptoCallback) === null || _a === void 0 ? void 0 : _a.call(this, event.payload.assetInfo, event.payload.amount, event.payload.address)];\n          case 2:\n            result = _b.sent();\n            if (!(result === null || result === void 0 ? void 0 : result.txHash)) {\n              throw new Error('Missing txHash in the callback result');\n            }\n            return [3 /*break*/, 4];\n          case 3:\n            e_2 = _b.sent();\n            errorMessage = void 0;\n            if (typeof e_2 === 'string') {\n              errorMessage = e_2;\n            } else if (e_2 instanceof Error) {\n              errorMessage = e_2.message;\n            }\n            this._sendEventToWidget({\n              eventVersion: SEND_CRYPTO_SUPPORTED_VERSION,\n              type: InternalSdkEventTypes.SEND_CRYPTO_RESULT,\n              payload: {\n                error: errorMessage\n              }\n            });\n            return [2 /*return*/];\n          case 4:\n            this._sendEventToWidget({\n              eventVersion: SEND_CRYPTO_SUPPORTED_VERSION,\n              type: InternalSdkEventTypes.SEND_CRYPTO_RESULT,\n              payload: {\n                txHash: result.txHash\n              }\n            });\n            return [2 /*return*/];\n        }\n      });\n    });\n  };\n  // Event subscriptions aren't cleared so that host can receive a PAYMENT_SUCCESSFUL event\n  // even after the widget has been closed\n  RampInstantSDK.prototype._teardownEventSubscriptions = function () {\n    window.removeEventListener('keydown', this._handleEscapeClick, true);\n    window.removeEventListener('message', this._subscribeToWidgetEvents);\n  };\n  RampInstantSDK.prototype._showUsingEmbeddedMode = function () {\n    var _a, _b;\n    var widgetUrl = initWidgetIframeUrl(this._config);\n    this.domNodes = initDOMNodeWithoutOverlay(widgetUrl, this._dispatchEvent, this._config);\n    if (!((_a = this.domNodes) === null || _a === void 0 ? void 0 : _a.body)) {\n      throw new Error(\"Couldn't find <body> element.\");\n    }\n    (_b = this._config.containerNode) === null || _b === void 0 ? void 0 : _b.appendChild(this.domNodes.shadowHost);\n    this._isVisible = true;\n  };\n  RampInstantSDK.prototype._showUsingOverlayMode = function () {\n    var _a;\n    var widgetUrl = initWidgetIframeUrl(this._config);\n    this.domNodes = initDOMNodeWithOverlay(widgetUrl, this._dispatchEvent, this._config);\n    if (!((_a = this.domNodes) === null || _a === void 0 ? void 0 : _a.body)) {\n      throw new Error(\"Couldn't find <body> element.\");\n    }\n    this.domNodes.body.appendChild(this.domNodes.shadowHost);\n    this._isVisible = true;\n    disableBodyScroll(this.domNodes.iframe);\n    var widgetMode = determineWidgetVariant(this._config);\n    if (widgetMode !== 'desktop' && widgetMode !== 'embedded-desktop') {\n      hideWebsiteBelow(this.domNodes.shadow);\n    }\n  };\n  RampInstantSDK.prototype._showUsingHostedMode = function () {\n    var _a;\n    var widgetUrl = initWidgetIframeUrl(this._config);\n    this.widgetWindow = (_a = window.open(widgetUrl)) !== null && _a !== void 0 ? _a : undefined;\n  };\n  RampInstantSDK.prototype._isConfiguredWithOverlay = function () {\n    return ['desktop', 'mobile'].includes(this._config.variant);\n  };\n  RampInstantSDK.prototype._isConfiguredAsHosted = function () {\n    return ['hosted-desktop', 'hosted-mobile'].includes(this._config.variant);\n  };\n  RampInstantSDK.prototype._isConfiguredAsEmbedded = function () {\n    return ['embedded-desktop', 'embedded-mobile'].includes(this._rawNormalizedConfig.variant);\n  };\n  RampInstantSDK.prototype._getHostConfigSdkParams = function (config, useSendCryptoCallback) {\n    var widgetVariant = determineWidgetVariant(config);\n    return __assign({\n      sdkType: 'WEB',\n      sdkVersion: SDK_VERSION,\n      variant: widgetVariant,\n      widgetInstanceId: getRandomIntString()\n    }, useSendCryptoCallback ? {\n      useSendCryptoCallbackVersion: SEND_CRYPTO_SUPPORTED_VERSION\n    } : {});\n  };\n  return RampInstantSDK;\n}();\nexport { WidgetEventTypes as RampInstantEventTypes, RampInstantSDK };","map":{"version":3,"names":["_toConsumableArray","arr","Array","isArray","i","arr2","length","from","hasPassiveEvents","window","passiveTestOptions","passive","undefined","addEventListener","removeEventListener","isIosDevice","navigator","platform","test","maxTouchPoints","locks","documentListenerAdded","initialClientY","previousBodyOverflowSetting","previousBodyPaddingRight","allowTouchMove","el","some","lock","options","preventDefault","rawEvent","e","event","target","touches","setOverflowHidden","_reserveScrollBarGap","reserveScrollBarGap","scrollBarGap","innerWidth","document","documentElement","clientWidth","body","style","paddingRight","overflow","restoreOverflowSetting","isTargetElementTotallyScrolled","targetElement","scrollHeight","scrollTop","clientHeight","handleScroll","clientY","targetTouches","stopPropagation","disableBodyScroll","console","error","concat","ontouchstart","ontouchmove","clearAllBodyScrollLocks","forEach","baseWidgetUrl","SEND_CRYPTO_SUPPORTED_VERSION","PaymentMethodName","PurchaseStatus","EventSeverity","WidgetEventTypes","InternalEventTypes","InternalSdkEventTypes","getRandomIntString","String","crypto","getRandomValues","Uint32Array","Math","floor","random","widgetDesktopWidth","widgetDesktopHeight","minWidgetMobileWidth","normalizeConfigAndLogErrorsOnInvalidFields","config","errors","configCopy","__assign","variant","push","fieldName","description","exampleValue","severity","WARNING","validateContainerNode","containerNode","includes","useSendCryptoCallback","logErrors","group","log","groupEnd","initEventListenersDict","widgetEventTypes","Object","values","internalEventTypes","__spreadArray","reduce","listenersDict","eventType","_a","mediaQuery","toLocaleLowerCase","isDesktop","matchMedia","matches","isHtmlElement","element","blur","Error","HTMLElement","contains","getBoundingClientRect","width","height","minWidgetMobileHeight","getBaseUrl","URL","url","initWidgetIframeUrl","baseUrl","hostUrl","location","origin","configWithoutIframeUrl","__rest","preparedConfig","key","value","searchParams","append","join","toString","hideWebsiteBelow","parent","containerWidth","backgroundWebsiteHider","createElement","classList","add","maxWidth","appendChild","initDOMNodeWithOverlay","dispatch","querySelector","shadowHost","shadow","attachShadow","mode","getStylesForShadowDom","iframe","prepareIframeNode","overlay","prepareOverlayNode","initDOMNodeWithoutOverlay","_dispatch","container","loader","importFonts","font","setAttribute","head","innerHeight","querySelectorAll","type","WIDGET_CLOSE_REQUEST","payload","internal","areUrlsEqual","url0","url1","isCloseModalAlreadyOpen","prepareCloseModalNode","textEl","textContent","buttonContainer","cancelButton","WIDGET_CLOSE_REQUEST_CANCELLED","exitButton","WIDGET_CLOSE_REQUEST_CONFIRMED","styles","isMobile","isEmbedded","RampInstantSDK","_listeners","_isVisible","_onSendCryptoCallback","unsubscribe","bind","on","show","_handleEscapeClick","_dispatchEvent","_subscribeToWidgetEvents","_on","_registerSdkEventHandlers","_onSendCrypto","_rawNormalizedConfig","_config","_getHostConfigSdkParams","prototype","activeElement","_isConfiguredAsHosted","_showUsingHostedMode","_isConfiguredAsEmbedded","_showUsingEmbeddedMode","_isConfiguredWithOverlay","_showUsingOverlayMode","callback","_this","allTypes","entries","eventHandlers","filteredHandlers","filter","l","warn","close","WIDGET_CLOSE","widgetInstanceId","onSendCrypto","onRequestCryptoAccount","trys","result","sent","address","e_1","errorMessage","message","_sendEventToWidget","REQUEST_CRYPTO_ACCOUNT_RESULT","name","assetSymbol","REQUEST_CRYPTO_ACCOUNT","data","eventData","_b","widgetWindow","domNodes","remove","_teardownEventSubscriptions","useSendCryptoCallbackVersion","SEND_CRYPTO","WIDGET_CONFIG_DONE","onConfigEvent","WIDGET_CONFIG_FAILED","_event","modal","_c","_d","handler","escKeyCode","keyCode","txHash","e_2","eventVersion","SEND_CRYPTO_RESULT","widgetUrl","widgetMode","determineWidgetVariant","open","widgetVariant","sdkType","sdkVersion","SDK_VERSION"],"sources":["/Users/adarshashok/Downloads/OffRampForm/offrampform/node_modules/@ramp-network/ramp-instant-sdk/node_modules/body-scroll-lock/lib/bodyScrollLock.esm.js","/Users/adarshashok/Downloads/OffRampForm/offrampform/node_modules/@ramp-network/ramp-instant-sdk/src/consts.ts","/Users/adarshashok/Downloads/OffRampForm/offrampform/node_modules/@ramp-network/ramp-instant-sdk/src/types.ts","/Users/adarshashok/Downloads/OffRampForm/offrampform/node_modules/@ramp-network/ramp-instant-sdk/src/utils.ts","/Users/adarshashok/Downloads/OffRampForm/offrampform/node_modules/@ramp-network/ramp-instant-sdk/src/init-helpers.ts","/Users/adarshashok/Downloads/OffRampForm/offrampform/node_modules/@ramp-network/ramp-instant-sdk/src/ramp-instant-sdk.ts"],"sourcesContent":["function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\n// Older browsers don't support event options, feature detect it.\n\n// Adopted and modified solution from Bohdan Didukh (2017)\n// https://stackoverflow.com/questions/41594997/ios-10-safari-prevent-scrolling-behind-a-fixed-overlay-and-maintain-scroll-posi\n\nvar hasPassiveEvents = false;\nif (typeof window !== 'undefined') {\n  var passiveTestOptions = {\n    get passive() {\n      hasPassiveEvents = true;\n      return undefined;\n    }\n  };\n  window.addEventListener('testPassive', null, passiveTestOptions);\n  window.removeEventListener('testPassive', null, passiveTestOptions);\n}\n\nvar isIosDevice = typeof window !== 'undefined' && window.navigator && window.navigator.platform && (/iP(ad|hone|od)/.test(window.navigator.platform) || window.navigator.platform === 'MacIntel' && window.navigator.maxTouchPoints > 1);\n\n\nvar locks = [];\nvar documentListenerAdded = false;\nvar initialClientY = -1;\nvar previousBodyOverflowSetting = void 0;\nvar previousBodyPaddingRight = void 0;\n\n// returns true if `el` should be allowed to receive touchmove events.\nvar allowTouchMove = function allowTouchMove(el) {\n  return locks.some(function (lock) {\n    if (lock.options.allowTouchMove && lock.options.allowTouchMove(el)) {\n      return true;\n    }\n\n    return false;\n  });\n};\n\nvar preventDefault = function preventDefault(rawEvent) {\n  var e = rawEvent || window.event;\n\n  // For the case whereby consumers adds a touchmove event listener to document.\n  // Recall that we do document.addEventListener('touchmove', preventDefault, { passive: false })\n  // in disableBodyScroll - so if we provide this opportunity to allowTouchMove, then\n  // the touchmove event on document will break.\n  if (allowTouchMove(e.target)) {\n    return true;\n  }\n\n  // Do not prevent if the event has more than one touch (usually meaning this is a multi touch gesture like pinch to zoom).\n  if (e.touches.length > 1) return true;\n\n  if (e.preventDefault) e.preventDefault();\n\n  return false;\n};\n\nvar setOverflowHidden = function setOverflowHidden(options) {\n  // If previousBodyPaddingRight is already set, don't set it again.\n  if (previousBodyPaddingRight === undefined) {\n    var _reserveScrollBarGap = !!options && options.reserveScrollBarGap === true;\n    var scrollBarGap = window.innerWidth - document.documentElement.clientWidth;\n\n    if (_reserveScrollBarGap && scrollBarGap > 0) {\n      previousBodyPaddingRight = document.body.style.paddingRight;\n      document.body.style.paddingRight = scrollBarGap + 'px';\n    }\n  }\n\n  // If previousBodyOverflowSetting is already set, don't set it again.\n  if (previousBodyOverflowSetting === undefined) {\n    previousBodyOverflowSetting = document.body.style.overflow;\n    document.body.style.overflow = 'hidden';\n  }\n};\n\nvar restoreOverflowSetting = function restoreOverflowSetting() {\n  if (previousBodyPaddingRight !== undefined) {\n    document.body.style.paddingRight = previousBodyPaddingRight;\n\n    // Restore previousBodyPaddingRight to undefined so setOverflowHidden knows it\n    // can be set again.\n    previousBodyPaddingRight = undefined;\n  }\n\n  if (previousBodyOverflowSetting !== undefined) {\n    document.body.style.overflow = previousBodyOverflowSetting;\n\n    // Restore previousBodyOverflowSetting to undefined\n    // so setOverflowHidden knows it can be set again.\n    previousBodyOverflowSetting = undefined;\n  }\n};\n\n// https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollHeight#Problems_and_solutions\nvar isTargetElementTotallyScrolled = function isTargetElementTotallyScrolled(targetElement) {\n  return targetElement ? targetElement.scrollHeight - targetElement.scrollTop <= targetElement.clientHeight : false;\n};\n\nvar handleScroll = function handleScroll(event, targetElement) {\n  var clientY = event.targetTouches[0].clientY - initialClientY;\n\n  if (allowTouchMove(event.target)) {\n    return false;\n  }\n\n  if (targetElement && targetElement.scrollTop === 0 && clientY > 0) {\n    // element is at the top of its scroll.\n    return preventDefault(event);\n  }\n\n  if (isTargetElementTotallyScrolled(targetElement) && clientY < 0) {\n    // element is at the bottom of its scroll.\n    return preventDefault(event);\n  }\n\n  event.stopPropagation();\n  return true;\n};\n\nexport var disableBodyScroll = function disableBodyScroll(targetElement, options) {\n  // targetElement must be provided\n  if (!targetElement) {\n    // eslint-disable-next-line no-console\n    console.error('disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.');\n    return;\n  }\n\n  // disableBodyScroll must not have been called on this targetElement before\n  if (locks.some(function (lock) {\n    return lock.targetElement === targetElement;\n  })) {\n    return;\n  }\n\n  var lock = {\n    targetElement: targetElement,\n    options: options || {}\n  };\n\n  locks = [].concat(_toConsumableArray(locks), [lock]);\n\n  if (isIosDevice) {\n    targetElement.ontouchstart = function (event) {\n      if (event.targetTouches.length === 1) {\n        // detect single touch.\n        initialClientY = event.targetTouches[0].clientY;\n      }\n    };\n    targetElement.ontouchmove = function (event) {\n      if (event.targetTouches.length === 1) {\n        // detect single touch.\n        handleScroll(event, targetElement);\n      }\n    };\n\n    if (!documentListenerAdded) {\n      document.addEventListener('touchmove', preventDefault, hasPassiveEvents ? { passive: false } : undefined);\n      documentListenerAdded = true;\n    }\n  } else {\n    setOverflowHidden(options);\n  }\n};\n\nexport var clearAllBodyScrollLocks = function clearAllBodyScrollLocks() {\n  if (isIosDevice) {\n    // Clear all locks ontouchstart/ontouchmove handlers, and the references.\n    locks.forEach(function (lock) {\n      lock.targetElement.ontouchstart = null;\n      lock.targetElement.ontouchmove = null;\n    });\n\n    if (documentListenerAdded) {\n      document.removeEventListener('touchmove', preventDefault, hasPassiveEvents ? { passive: false } : undefined);\n      documentListenerAdded = false;\n    }\n\n    // Reset initial clientY.\n    initialClientY = -1;\n  } else {\n    restoreOverflowSetting();\n  }\n\n  locks = [];\n};\n\nexport var enableBodyScroll = function enableBodyScroll(targetElement) {\n  if (!targetElement) {\n    // eslint-disable-next-line no-console\n    console.error('enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.');\n    return;\n  }\n\n  locks = locks.filter(function (lock) {\n    return lock.targetElement !== targetElement;\n  });\n\n  if (isIosDevice) {\n    targetElement.ontouchstart = null;\n    targetElement.ontouchmove = null;\n\n    if (documentListenerAdded && locks.length === 0) {\n      document.removeEventListener('touchmove', preventDefault, hasPassiveEvents ? { passive: false } : undefined);\n      documentListenerAdded = false;\n    }\n  } else if (!locks.length) {\n    restoreOverflowSetting();\n  }\n};\n\n","export const baseWidgetUrl = 'https://buy.ramp.network/';\n\nexport const SEND_CRYPTO_SUPPORTED_VERSION = 1 as const;\n\n// It will be evaluated by rollup-plugin-version-injector\nexport const SDK_VERSION = '[VI]{version}[/VI]';\n","import { SEND_CRYPTO_SUPPORTED_VERSION } from './consts';\n\ntype TAsset = string;\ntype TEthAddress = string;\ntype TSwapAmount = string;\ntype THostLogoUrl = string;\ntype THostApiKey = string;\ntype THostAppName = string;\ntype TURL = string;\ntype TDateString = string;\ntype TFiatCurrency = string;\ntype TFiatValue = string;\ntype TAddress = string;\ntype TEmailAddress = string;\ntype TCryptoAmount = string;\ntype TAssetExchangeRate = number;\ntype TFinalTxHash = string;\ntype TActionID = string;\ntype TNewActionStatus = string;\ntype TActionTimestamp = string;\ntype TActionDetails = string;\ntype TWebhookStatusUrl = string;\ntype TFinalUrl = string;\ntype TContainerNode = HTMLElement;\ntype TFlow = 'ONRAMP' | 'OFFRAMP';\n\nexport enum PaymentMethodName {\n  MANUAL_BANK_TRANSFER = 'MANUAL_BANK_TRANSFER',\n  AUTO_BANK_TRANSFER = 'AUTO_BANK_TRANSFER',\n  CARD_PAYMENT = 'CARD_PAYMENT',\n  APPLE_PAY = 'APPLE_PAY',\n}\n\nexport enum PurchaseStatus {\n  INITIALIZED = 'INITIALIZED',\n  PAYMENT_STARTED = 'PAYMENT_STARTED',\n  PAYMENT_IN_PROGRESS = 'PAYMENT_IN_PROGRESS',\n  PAYMENT_FAILED = 'PAYMENT_FAILED',\n  PAYMENT_EXECUTED = 'PAYMENT_EXECUTED',\n  FIAT_RECEIVED = 'FIAT_RECEIVED',\n  FIAT_SENT = 'FIAT_SENT',\n  EXPIRED = 'EXPIRED',\n  CANCELLED = 'CANCELLED',\n  RELEASING = 'RELEASING',\n  RELEASED = 'RELEASED',\n}\n\nexport type TPurchaseExternalId = string;\n\nexport interface IHostConfig {\n  swapAsset?: TAsset;\n  offrampAsset?: TAsset;\n  swapAmount?: TSwapAmount;\n  fiatValue?: TFiatValue;\n  fiatCurrency?: TFiatCurrency;\n  userAddress?: TEthAddress;\n  userEmailAddress?: TEmailAddress;\n  hostApiKey?: THostApiKey;\n  hostLogoUrl: THostLogoUrl;\n  hostAppName: THostAppName;\n  url?: TURL;\n  variant?: AllWidgetVariants;\n  webhookStatusUrl?: TWebhookStatusUrl;\n  finalUrl?: TFinalUrl;\n  containerNode?: TContainerNode;\n  selectedCountryCode?: string;\n  defaultAsset?: TAsset;\n  defaultFlow?: TFlow;\n  enabledFlows?: TFlow[];\n  offrampWebhookV3Url?: TWebhookStatusUrl;\n  useSendCryptoCallback?: boolean;\n}\n\nexport interface IHostConfigWithSdkParams extends Omit<IHostConfig, 'useSendCryptoCallback'> {\n  sdkType: 'WEB';\n  sdkVersion: string;\n  widgetInstanceId: string;\n  variant: AllWidgetVariants;\n  useSendCryptoCallbackVersion?: typeof SEND_CRYPTO_SUPPORTED_VERSION;\n}\n\nexport interface IAssetInfo {\n  address: string | null;\n  symbol: string;\n  type: string;\n  name: string;\n  decimals: number;\n}\n\nexport interface IPurchase {\n  id: TPurchaseExternalId;\n  endTime: TDateString | null;\n  asset: IAssetInfo;\n  receiverAddress: TAddress;\n  cryptoAmount: TCryptoAmount;\n  fiatCurrency: TFiatCurrency;\n  fiatValue: TFiatValue;\n  assetExchangeRate: TAssetExchangeRate;\n  baseRampFee: TFiatValue;\n  networkFee: TFiatValue;\n  appliedFee: TFiatValue;\n  paymentMethodType: PaymentMethodName;\n  finalTxHash?: TFinalTxHash;\n  createdAt: TDateString;\n  updatedAt: TDateString;\n  status: PurchaseStatus;\n}\n\nexport interface AssetInfo {\n  address: string | null;\n  symbol: string;\n  chain: string;\n  type: string;\n  name: string;\n  decimals: number;\n}\n\nexport interface IOfframpSale {\n  id: string;\n  createdAt: string;\n  crypto: {\n    amount: string;\n    assetInfo: AssetInfo;\n  };\n  fiat: {\n    amount: number;\n    currencySymbol: string;\n  };\n}\n\nexport interface IAction {\n  id: TActionID;\n  newStatus: TNewActionStatus;\n  timestamp: TActionTimestamp;\n  details: TActionDetails;\n}\n\nexport enum EventSeverity {\n  VERBOSE = 'VERBOSE',\n  DEBUG = 'DEBUG',\n  INFO = 'INFO',\n  WARNING = 'WARNING',\n  ERROR = 'ERROR',\n  CRITICAL = 'CRITICAL',\n}\n\nexport interface IConfigError {\n  fieldName: string;\n  description: string;\n  exampleValue?: string;\n  severity: EventSeverity;\n}\n\nexport interface IWidgetEvent {\n  type: string;\n  payload: any | null;\n  internal?: boolean;\n}\n\nexport enum WidgetEventTypes {\n  WIDGET_CLOSE = 'WIDGET_CLOSE',\n  WIDGET_CONFIG_DONE = 'WIDGET_CONFIG_DONE',\n  WIDGET_CONFIG_FAILED = 'WIDGET_CONFIG_FAILED',\n  PURCHASE_CREATED = 'PURCHASE_CREATED',\n  OFFRAMP_SALE_CREATED = 'OFFRAMP_SALE_CREATED',\n}\n\nexport enum InternalEventTypes {\n  WIDGET_CLOSE_REQUEST = 'WIDGET_CLOSE_REQUEST',\n  WIDGET_CLOSE_REQUEST_CANCELLED = 'WIDGET_CLOSE_REQUEST_CANCELLED',\n  WIDGET_CLOSE_REQUEST_CONFIRMED = 'WIDGET_CLOSE_REQUEST_CONFIRMED',\n  REQUEST_CRYPTO_ACCOUNT = 'REQUEST_CRYPTO_ACCOUNT',\n  SEND_CRYPTO = 'SEND_CRYPTO',\n}\n\nexport type TAllEventTypes = WidgetEventTypes | InternalEventTypes;\n\nexport interface IWidgetCloseEvent extends IWidgetEvent {\n  type: WidgetEventTypes.WIDGET_CLOSE;\n  payload: null;\n  widgetInstanceId: string;\n  internal?: false;\n}\n\nexport interface IPurchaseCreatedEvent extends IWidgetEvent {\n  type: WidgetEventTypes.PURCHASE_CREATED;\n  payload: {\n    purchase: IPurchase;\n    purchaseViewToken: string;\n    apiUrl: string;\n  };\n  widgetInstanceId: string;\n  internal?: false;\n}\n\nexport interface IOfframpSaleCreatedEvent extends IWidgetEvent {\n  type: WidgetEventTypes.OFFRAMP_SALE_CREATED;\n  payload: {\n    sale: IOfframpSale;\n    saleViewToken: string;\n    apiUrl: string;\n  };\n  widgetInstanceId: string;\n  internal?: false;\n}\n\nexport interface IWidgetConfigDoneEvent extends IWidgetEvent {\n  type: WidgetEventTypes.WIDGET_CONFIG_DONE;\n  payload: null;\n  widgetInstanceId: string;\n  internal?: false;\n}\n\nexport interface IWidgetConfigFailedEvent extends IWidgetEvent {\n  type: WidgetEventTypes.WIDGET_CONFIG_FAILED;\n  payload: null;\n  widgetInstanceId: string;\n  internal?: false;\n}\n\nexport interface IWidgetCloseRequestEvent extends IWidgetEvent {\n  type: InternalEventTypes.WIDGET_CLOSE_REQUEST;\n  payload: null;\n  widgetInstanceId?: string;\n  internal: boolean;\n}\n\nexport interface IRequestCryptoAccountEvent extends IWidgetEvent {\n  type: InternalEventTypes.REQUEST_CRYPTO_ACCOUNT;\n  payload: {\n    type: string;\n    assetSymbol: string;\n  };\n  widgetInstanceId?: string;\n}\n\nexport interface ISendCryptoEvent extends IWidgetEvent {\n  eventVersion: typeof SEND_CRYPTO_SUPPORTED_VERSION;\n  type: InternalEventTypes.SEND_CRYPTO;\n  payload: {\n    assetInfo: AssetInfo;\n    amount: string;\n    address: string;\n  };\n  widgetInstanceId?: string;\n}\n\nexport interface IWidgetCloseRequestCancelledEvent extends IWidgetEvent {\n  type: InternalEventTypes.WIDGET_CLOSE_REQUEST_CANCELLED;\n  payload: null;\n  internal: true;\n}\n\nexport interface IWidgetCloseRequestConfirmedEvent extends IWidgetEvent {\n  type: InternalEventTypes.WIDGET_CLOSE_REQUEST_CONFIRMED;\n  payload: null;\n  internal: true;\n}\n\nexport type TWidgetEvents =\n  | IWidgetCloseEvent\n  | IWidgetConfigDoneEvent\n  | IWidgetConfigFailedEvent\n  | IPurchaseCreatedEvent\n  | IOfframpSaleCreatedEvent;\n\nexport type TInternalEvents =\n  | IWidgetCloseRequestEvent\n  | IWidgetCloseRequestCancelledEvent\n  | IWidgetCloseRequestConfirmedEvent\n  | IRequestCryptoAccountEvent\n  | ISendCryptoEvent;\n\nexport enum InternalSdkEventTypes {\n  REQUEST_CRYPTO_ACCOUNT_RESULT = 'REQUEST_CRYPTO_ACCOUNT_RESULT',\n  SEND_CRYPTO_RESULT = 'SEND_CRYPTO_RESULT',\n}\n\nexport interface IRequestCryptoAccountResultEvent extends IWidgetEvent {\n  type: InternalSdkEventTypes.REQUEST_CRYPTO_ACCOUNT_RESULT;\n  payload:\n    | IOnRequestCryptoAccountResult\n    | {\n        error: string | undefined;\n      };\n  widgetInstanceId?: string;\n}\n\nexport interface ISendCryptoResultEvent extends IWidgetEvent {\n  eventVersion: typeof SEND_CRYPTO_SUPPORTED_VERSION;\n  type: InternalSdkEventTypes.SEND_CRYPTO_RESULT;\n  payload:\n    | IOnSendCryptoResult\n    | {\n        error: string | undefined;\n      };\n  widgetInstanceId?: string;\n}\n\nexport type TSdkEvents = IRequestCryptoAccountResultEvent | ISendCryptoResultEvent;\n\nexport type TAllEvents = TWidgetEvents | TInternalEvents;\n\nexport type WidgetVariantTypes =\n  | 'desktop'\n  | 'mobile'\n  | 'hosted-desktop'\n  | 'hosted-mobile'\n  | 'webview-desktop'\n  | 'webview-mobile';\n\nexport type SyntheticWidgetVariants =\n  | 'hosted-auto'\n  | 'auto'\n  | 'embedded-desktop'\n  | 'embedded-mobile';\n\nexport type AllWidgetVariants = WidgetVariantTypes | SyntheticWidgetVariants;\n\nexport type TUnsubscribeToken = string;\n\nexport type TEventListenerDict = {\n  [EventType in TAllEvents['type']]: IEventListener[];\n};\n\nexport interface IEventListener {\n  internal: boolean;\n  callback(evt: TAllEvents): any;\n}\n\nexport interface IOnRequestCryptoAccountResult {\n  address: string;\n  type?: string;\n  name?: string;\n  assetSymbol?: string;\n}\n\nexport interface IOnSendCryptoResult {\n  txHash: string;\n}\n\nexport type TOnRequestCryptoAccountCallback = (\n  type: string,\n  assetSymbol: string\n) => Promise<IOnRequestCryptoAccountResult>;\n\nexport type TOnSendCryptoCallback = (\n  assetInfo: AssetInfo,\n  amount: string,\n  address: string\n) => Promise<IOnSendCryptoResult>;\n","import {\n  AllWidgetVariants,\n  EventSeverity,\n  IConfigError,\n  IHostConfig,\n  InternalEventTypes,\n  SyntheticWidgetVariants,\n  TAllEventTypes,\n  TEventListenerDict,\n  WidgetEventTypes,\n} from './types';\n\nexport function getRandomIntString(): string {\n  try {\n    return String(crypto.getRandomValues(new Uint32Array(1))[0]);\n  } catch {\n    // if `crypto` is not supported, fall back to Math.random\n    // tslint:disable-next-line:no-magic-numbers\n    return String(Math.floor(Math.random() * 10000000));\n  }\n}\n\nexport const widgetDesktopWidth = 895;\nexport const widgetDesktopHeight = 590;\n\nexport const minWidgetMobileWidth = 320;\nexport const minWidgetMobileHeight = 667;\n\nexport function normalizeConfigAndLogErrorsOnInvalidFields(\n  config: Partial<IHostConfig>\n): IHostConfig {\n  const errors: IConfigError[] = [];\n  const configCopy = { ...config };\n\n  if (\n    ![\n      'desktop',\n      'mobile',\n      'hosted-desktop',\n      'hosted-mobile',\n      'hosted-auto',\n      'auto',\n      'embedded-desktop',\n      'embedded-mobile',\n    ].includes(config.variant!)\n  ) {\n    configCopy.variant = 'desktop';\n\n    errors.push({\n      fieldName: 'variant',\n      description: 'Invalid value for `variant` config field ',\n      exampleValue: `'desktop'`,\n      severity: EventSeverity.WARNING,\n    });\n  }\n\n  if (config.variant === 'embedded-desktop' || config.variant === 'embedded-mobile') {\n    validateContainerNode(config.containerNode, config.variant);\n  }\n\n  if (!['embedded-desktop', 'embedded-mobile'].includes(configCopy.variant!)) {\n    delete configCopy.containerNode;\n  }\n\n  if (typeof config.useSendCryptoCallback !== 'undefined') {\n    delete config.useSendCryptoCallback;\n  }\n\n  logErrors(errors);\n\n  return configCopy as IHostConfig;\n}\n\nfunction logErrors(errors: IConfigError[]): void {\n  if (!errors.length) {\n    return;\n  }\n\n  // tslint:disable:no-console\n  console.group('Config errors');\n\n  errors.forEach((error) => {\n    console.group(error.fieldName);\n\n    console.log(error.description);\n    console.log(`Example expected value: ${error.exampleValue}`);\n    console.log(`Severity: ${error.severity}`);\n\n    console.groupEnd();\n  });\n\n  console.groupEnd();\n  // tslint:enable:no-console\n}\n\nexport function initEventListenersDict(): TEventListenerDict {\n  const widgetEventTypes = Array.from(Object.values(WidgetEventTypes));\n  const internalEventTypes = Array.from(Object.values(InternalEventTypes));\n\n  return [...widgetEventTypes, ...internalEventTypes].reduce<TEventListenerDict>(\n    (listenersDict: TEventListenerDict, eventType: TAllEventTypes) => {\n      listenersDict[eventType] = [];\n\n      return listenersDict;\n    },\n    {} as any\n  ) as TEventListenerDict;\n}\n\nexport function determineWidgetVariant(config: IHostConfig): AllWidgetVariants {\n  const mediaQuery = '(min-width: 920px) and (min-height: 630px)';\n  const variant = config.variant?.toLocaleLowerCase();\n\n  if (\n    variant === 'mobile' ||\n    variant === 'desktop' ||\n    variant === 'hosted-mobile' ||\n    variant === 'hosted-desktop' ||\n    variant === 'embedded-desktop' ||\n    variant === 'embedded-mobile'\n  ) {\n    return variant;\n  }\n\n  const isDesktop = window.matchMedia(mediaQuery).matches;\n\n  if (variant === 'hosted-auto') {\n    return isDesktop ? 'hosted-desktop' : 'hosted-mobile';\n  }\n\n  return isDesktop ? 'desktop' : 'mobile';\n}\n\nexport function isHtmlElement(element: Element): element is HTMLElement {\n  return typeof (element as any).blur === 'function';\n}\n\nfunction validateContainerNode(\n  containerNode: HTMLElement | undefined,\n  variant: SyntheticWidgetVariants\n): void {\n  if (!document.body) {\n    throw new Error(\"Couldn't find <body> element.\");\n  }\n\n  if (!(containerNode instanceof HTMLElement)) {\n    throw new Error('Container node has to be a proper HTML element.');\n  }\n\n  if (!document.body.contains(containerNode)) {\n    throw new Error('Container node must be attached to the document.');\n  }\n\n  const { width, height } = containerNode.getBoundingClientRect();\n\n  if (variant === 'embedded-desktop') {\n    if (width + 1 < widgetDesktopWidth) {\n      throw new Error(`Container node must be at least ${widgetDesktopWidth}px wide.`);\n    }\n\n    if (height + 1 < widgetDesktopHeight) {\n      throw new Error(`Container node must be at least ${widgetDesktopHeight}px tall.`);\n    }\n  } else if (variant === 'embedded-mobile') {\n    if (width + 1 < minWidgetMobileWidth) {\n      throw new Error(`Container node must be at least ${minWidgetMobileWidth}px wide.`);\n    }\n\n    if (height + 1 < minWidgetMobileHeight) {\n      throw new Error(`Container node must be at least ${minWidgetMobileHeight}px tall.`);\n    }\n  }\n}\n\n/**\n * Concatenates `base` with `path`, always treating `path` as a relative path. Ignores:\n *   - trailing slash in `base`\n *   - leading slash in `path`\n * @param base base URL, e.g.: 'http://example.com/api' or 'http://example.com/service/api/'\n * @param path path to append, e.g.: 'user/getByEmail' or '/swap'\n */\nexport function concatRelativePath(base: string | URL, path: string): URL {\n  const normalizedBase = urlWithoutTrailingSlash(base instanceof URL ? base.href : base);\n  const normalizedPath = path.startsWith('/') ? path.substr(1) : path;\n  return new URL(`${normalizedBase}/${normalizedPath}`);\n}\n\nexport function urlWithoutTrailingSlash(url: string): string {\n  return url.endsWith('/') ? url.slice(0, -1) : url;\n}\n","import { baseWidgetUrl } from './consts';\nimport {\n  AllWidgetVariants,\n  IHostConfigWithSdkParams,\n  InternalEventTypes,\n  TAllEvents,\n} from './types';\nimport {\n  minWidgetMobileHeight,\n  minWidgetMobileWidth,\n  widgetDesktopHeight,\n  widgetDesktopWidth,\n} from './utils';\n\nexport function getBaseUrl(config: IHostConfigWithSdkParams): URL {\n  return new URL(config.url || baseWidgetUrl);\n}\n\nexport function initWidgetIframeUrl(config: IHostConfigWithSdkParams): string {\n  const baseUrl = getBaseUrl(config);\n  const hostUrl = window.location.origin;\n\n  const { containerNode, url, ...configWithoutIframeUrl } = config;\n\n  const preparedConfig = { ...configWithoutIframeUrl, hostUrl };\n\n  Object.entries(preparedConfig).forEach(([key, value]) => {\n    if (value) {\n      baseUrl.searchParams.append(key, Array.isArray(value) ? value.join(',') : value.toString());\n    }\n  });\n\n  return baseUrl.toString();\n}\n\nexport function hideWebsiteBelow(\n  parent: Element | ShadowRoot,\n  containerWidth?: number | undefined\n): void {\n  const backgroundWebsiteHider = document.createElement('div');\n  backgroundWebsiteHider.classList.add('background-hider');\n\n  if (containerWidth) {\n    backgroundWebsiteHider.style.maxWidth = `${containerWidth}px`;\n  }\n\n  parent.appendChild(backgroundWebsiteHider);\n}\n\nexport function initDOMNodeWithOverlay(\n  url: string,\n  dispatch: (event: TAllEvents) => void,\n  config: IHostConfigWithSdkParams\n): {\n  body: HTMLBodyElement | null;\n  iframe: HTMLIFrameElement;\n  overlay: HTMLDivElement;\n  shadow: ShadowRoot;\n  shadowHost: HTMLDivElement;\n} {\n  const body = document.querySelector('body');\n\n  const shadowHost = document.createElement('div');\n\n  shadowHost.style.width = '100%';\n  shadowHost.style.height = '100%';\n\n  const shadow = shadowHost.attachShadow({ mode: 'open' });\n\n  shadow.appendChild(getStylesForShadowDom(config.variant));\n\n  const iframe = prepareIframeNode(url, config.variant);\n  const overlay = prepareOverlayNode(iframe, dispatch);\n\n  overlay.appendChild(iframe);\n  shadow.appendChild(overlay);\n\n  return {\n    body,\n    iframe,\n    overlay,\n    shadow,\n    shadowHost,\n  };\n}\n\nexport function initDOMNodeWithoutOverlay(\n  url: string,\n  _dispatch: (event: TAllEvents) => void,\n  config: IHostConfigWithSdkParams\n): {\n  body: HTMLBodyElement | null;\n  iframe: HTMLIFrameElement;\n  overlay: null;\n  shadow: ShadowRoot;\n  shadowHost: HTMLDivElement;\n} {\n  const body = document.querySelector('body');\n\n  const shadowHost = document.createElement('div');\n\n  shadowHost.style.width = '100%';\n  shadowHost.style.height = '100%';\n\n  const shadow = shadowHost.attachShadow({ mode: 'open' });\n\n  const container = document.createElement('div');\n  container.classList.add('embedded-container');\n\n  shadow.appendChild(container);\n\n  const loader = document.createElement('div');\n  loader.classList.add('loader-container');\n\n  // tslint:disable:max-line-length\n  loader.innerHTML = `\n    <svg width=\"92\" height=\"60\" viewBox=\"0 0 51 32\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"loader\">\n      <path d=\"M16.2232 18.8309L22.282 24.912C22.7953 25.4272 22.7948 26.2647 22.281 26.7792L17.651 31.4158C16.8619 32.1947 15.5719 32.1947 14.7828 31.4158L0.591812 17.4093C-0.197271 16.6305 -0.197271 15.3571 0.591812 14.5783L14.7828 0.584122C15.5719 -0.194707 16.8619 -0.194707 17.651 0.584122L22.281 5.22078C22.7948 5.73535 22.7953 6.57281 22.282 7.08795L16.2232 13.1691C14.645 14.7267 14.645 17.2733 16.2232 18.8309Z\" fill=\"#21BF73\"></path>\n      <path d=\"M34.4433 18.8309L28.3845 24.912C27.8712 25.4272 27.8717 26.2647 28.3855 26.7792L33.0155 31.4158C33.8046 32.1947 35.0946 32.1947 35.8837 31.4158L50.0747 17.4093C50.8638 16.6305 50.8638 15.3571 50.0747 14.5783L35.8837 0.584122C35.0946 -0.194707 33.8046 -0.194707 33.0155 0.584122L28.3855 5.22078C27.8717 5.73535 27.8712 6.57281 28.3845 7.08795L34.4433 13.1691C36.0215 14.7267 36.0215 17.2733 34.4433 18.8309Z\" fill=\"#0A6E5C\"></path>\n      <path d=\"M17.8128 17.157C17.1737 16.518 17.1737 15.482 17.8128 14.843L24.1765 8.47926C24.8155 7.84025 25.8515 7.84025 26.4905 8.47926L32.8542 14.843C33.4932 15.482 33.4932 16.518 32.8542 17.157L26.4905 23.5207C25.8515 24.1598 24.8155 24.1598 24.1765 23.5207L17.8128 17.157Z\" fill=\"#21BF73\"></path>\n    </svg>`;\n  // tslint:enable:max-line-length\n\n  container.appendChild(loader);\n\n  shadow.appendChild(getStylesForShadowDom(config.variant));\n\n  const iframe = prepareIframeNode(url, config.variant, config.containerNode);\n\n  container.appendChild(iframe);\n\n  return {\n    body,\n    iframe,\n    overlay: null,\n    shadow,\n    shadowHost,\n  };\n}\n\nexport function importFonts(): void {\n  if (document.querySelector('[data-ramp-font]')) {\n    return;\n  }\n\n  const font = document.createElement('link');\n\n  font.setAttribute(\n    'href',\n    'https://fonts.googleapis.com/css?family=Poppins:200,400,500,600,700&display=swap&subset=latin-ext'\n  );\n  font.setAttribute('rel', 'stylesheet');\n  font.setAttribute('data-ramp-font', '');\n\n  document.head.appendChild(font);\n}\n\nfunction prepareIframeNode(\n  url: string,\n  variant: AllWidgetVariants,\n  containerNode?: HTMLElement\n): HTMLIFrameElement {\n  const iframe = document.createElement('iframe');\n\n  iframe.setAttribute('src', url);\n\n  if (containerNode) {\n    iframe.setAttribute(\n      'width',\n      variant === 'desktop' || variant === 'embedded-desktop'\n        ? widgetDesktopWidth.toString()\n        : containerNode.getBoundingClientRect().width.toString()\n    );\n\n    iframe.setAttribute(\n      'height',\n      variant === 'desktop' || variant === 'embedded-desktop'\n        ? widgetDesktopHeight.toString()\n        : containerNode.getBoundingClientRect().height.toString()\n    );\n  } else {\n    iframe.setAttribute(\n      'width',\n      variant === 'desktop' || variant === 'embedded-desktop'\n        ? widgetDesktopWidth.toString()\n        : window.innerWidth.toString()\n    );\n\n    iframe.setAttribute(\n      'height',\n      variant === 'desktop' || variant === 'embedded-desktop'\n        ? widgetDesktopHeight.toString()\n        : window.innerHeight.toString()\n    );\n  }\n\n  iframe.setAttribute('allow', 'payment; microphone; camera; clipboard-read; clipboard-write');\n\n  iframe.classList.add('iframe');\n\n  return iframe;\n}\n\nfunction prepareOverlayNode(\n  iframe: HTMLIFrameElement,\n  dispatch: (event: TAllEvents) => void\n): HTMLDivElement {\n  const overlay = document.createElement('div');\n\n  overlay.classList.add('overlay');\n\n  const loader = document.createElement('div');\n  loader.classList.add('loader-container');\n\n  // tslint:disable:max-line-length\n  loader.innerHTML = `\n    <svg width=\"92\" height=\"60\" viewBox=\"0 0 51 32\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" class=\"loader\">\n      <path d=\"M16.2232 18.8309L22.282 24.912C22.7953 25.4272 22.7948 26.2647 22.281 26.7792L17.651 31.4158C16.8619 32.1947 15.5719 32.1947 14.7828 31.4158L0.591812 17.4093C-0.197271 16.6305 -0.197271 15.3571 0.591812 14.5783L14.7828 0.584122C15.5719 -0.194707 16.8619 -0.194707 17.651 0.584122L22.281 5.22078C22.7948 5.73535 22.7953 6.57281 22.282 7.08795L16.2232 13.1691C14.645 14.7267 14.645 17.2733 16.2232 18.8309Z\" fill=\"#21BF73\"></path>\n      <path d=\"M34.4433 18.8309L28.3845 24.912C27.8712 25.4272 27.8717 26.2647 28.3855 26.7792L33.0155 31.4158C33.8046 32.1947 35.0946 32.1947 35.8837 31.4158L50.0747 17.4093C50.8638 16.6305 50.8638 15.3571 50.0747 14.5783L35.8837 0.584122C35.0946 -0.194707 33.8046 -0.194707 33.0155 0.584122L28.3855 5.22078C27.8717 5.73535 27.8712 6.57281 28.3845 7.08795L34.4433 13.1691C36.0215 14.7267 36.0215 17.2733 34.4433 18.8309Z\" fill=\"#0A6E5C\"></path>\n      <path d=\"M17.8128 17.157C17.1737 16.518 17.1737 15.482 17.8128 14.843L24.1765 8.47926C24.8155 7.84025 25.8515 7.84025 26.4905 8.47926L32.8542 14.843C33.4932 15.482 33.4932 16.518 32.8542 17.157L26.4905 23.5207C25.8515 24.1598 24.8155 24.1598 24.1765 23.5207L17.8128 17.157Z\" fill=\"#21BF73\"></path>\n    </svg>`;\n  // tslint:enable:max-line-length\n\n  overlay.appendChild(loader);\n\n  overlay.addEventListener('click', (event) => {\n    if (event.target !== iframe && !overlay.querySelectorAll('.close-modal').length) {\n      dispatch({\n        type: InternalEventTypes.WIDGET_CLOSE_REQUEST,\n        payload: null,\n        internal: true,\n      });\n    }\n  });\n\n  return overlay;\n}\n\nexport function areUrlsEqual(url0: string, url1: string): boolean {\n  return new URL(url0).toString() === new URL(url1).toString();\n}\n\nexport function isCloseModalAlreadyOpen(containerNode: HTMLElement): boolean {\n  return containerNode.querySelectorAll('.close-modal').length !== 0;\n}\n\nexport function prepareCloseModalNode(dispatch: (event: TAllEvents) => void): HTMLDivElement {\n  const container = document.createElement('div');\n  container.classList.add('close-modal');\n\n  const textEl = document.createElement('div');\n  textEl.classList.add('close-modal__text');\n  textEl.textContent = 'Are you sure you want to exit Ramp and abandon the transaction?';\n\n  const buttonContainer = document.createElement('div');\n  buttonContainer.classList.add('close-modal__button-container');\n\n  const cancelButton = document.createElement('button');\n  cancelButton.setAttribute('type', 'button');\n  cancelButton.classList.add('close-modal__button');\n  cancelButton.classList.add('close-modal__button--cancel');\n  cancelButton.textContent = 'Cancel';\n  cancelButton.addEventListener('click', (event) => {\n    event.stopPropagation();\n\n    dispatch({\n      type: InternalEventTypes.WIDGET_CLOSE_REQUEST_CANCELLED,\n      payload: null,\n      internal: true,\n    });\n  });\n\n  const exitButton = document.createElement('button');\n  exitButton.setAttribute('type', 'button');\n  exitButton.classList.add('close-modal__button');\n  exitButton.classList.add('close-modal__button--exit');\n  exitButton.textContent = 'Exit';\n  exitButton.addEventListener('click', (event) => {\n    event.stopPropagation();\n\n    dispatch({\n      type: InternalEventTypes.WIDGET_CLOSE_REQUEST_CONFIRMED,\n      payload: null,\n      internal: true,\n    });\n  });\n\n  buttonContainer.appendChild(cancelButton);\n  buttonContainer.appendChild(exitButton);\n\n  container.appendChild(textEl);\n  container.appendChild(buttonContainer);\n\n  return container;\n}\n\nfunction getStylesForShadowDom(variant: AllWidgetVariants): HTMLStyleElement {\n  const styles = document.createElement('style');\n\n  const isMobile =\n    variant === 'mobile' ||\n    variant === 'hosted-mobile' ||\n    variant === 'embedded-mobile' ||\n    variant === 'webview-mobile';\n  const isEmbedded = variant === 'embedded-mobile' || variant === 'embedded-desktop';\n\n  styles.textContent = `\n\n    .background-hider {\n      content: '';\n      height: 30vh;\n      width: 100vw;\n      position: fixed;\n      bottom: 0;\n      transform: translateY(50%);\n      background-color: #f5f8fb;\n      z-index: 999;\n    }\n\n    .overlay {\n      position: fixed;\n      z-index: 1000;\n      width: 100vw;\n      height: ${isMobile ? '100%;' : '100vh;'}\n      top: 0;\n      left: 0;\n      overflow: hidden;\n      background-color: rgba(166, 174, 185, 0.7);\n      display: flex;\n      flex-flow: row nowrap;\n      justify-content: center;\n      ${isMobile ? 'align-items: flex-start;' : 'align-items: center;'}\n    }\n\n    .embedded-container {\n      z-index: 1000;\n      position: relative;\n      width: 100%;\n      height: 100%;\n      display: flex;\n      flex-flow: row nowrap;\n      justify-content: center;\n      ${isMobile ? 'align-items: flex-start;' : 'align-items: center;'}\n      min-width: ${isMobile ? minWidgetMobileWidth : widgetDesktopWidth}px;\n      min-height: ${isMobile ? minWidgetMobileHeight : widgetDesktopHeight}px;\n    }\n\n    .loader-container {\n      align-self: center;\n    }\n\n    .loader {\n      transform-origin: center;\n      animation: logoAnimation 4s linear infinite;\n      width: 100px;\n      height: auto;\n      align-self: center;\n    }\n\n    .loader path:nth-child(3) {\n      transform-origin: center;\n      position: relative;\n    }\n\n    .loader path:nth-child(1) {\n      transform-origin: center;\n      position: relative;\n      animation: box1Animation 4s linear infinite;\n      transform: scale(0.4) translateX(6px);\n    }\n\n    .loader path:nth-child(2) {\n      transform-origin: center;\n      position: relative;\n      animation: box4Animation 4s linear infinite;\n      transform: scale(0.4) translateX(-6px);\n    }\n\n    @keyframes logoAnimation {\n      10% {\n        transform: rotate(180deg);\n      }\n      30%{\n        transform: rotate(360deg);\n      }\n      70% {\n        transform: rotate(360deg);\n      }\n      90% {\n        transform: rotate(520deg);\n      }\n      100% {\n        transform: rotate(720deg);\n      }\n    }\n\n    @keyframes box1Animation {\n      0%, 10% {\n        transform: scale(0.4) translateX(6px);\n      }\n      30%, 70% {\n        transform: scale(1) translateX(0);\n      }\n      90% {\n        transform: scale(0.4) translateX(6px);\n      }\n    }\n\n\n    @keyframes box4Animation {\n      0%, 10% {\n        transform: scale(0.4) translateX(-6px);\n      }\n      30%, 70% {\n        transform: scale(1) translateX(0);\n      }\n      90% {\n        transform: scale(0.4) translateX(-6px);\n      }\n    }\n\n    .iframe {\n      border: none;\n      user-select: none;\n      visibility: hidden;\n      position: absolute;\n      color-scheme: only light;\n    }\n\n    .iframe.visible {\n      visibility: visible;\n      ${\n        !isEmbedded && isMobile\n          ? `\n        width: 100vw;\n        height: 100%;\n      `\n          : ''\n      }\n    }\n\n    .close-modal {\n      font-family: 'Poppins', sans-serif;\n      width: 678px;\n      height: 276px;\n      position: absolute;\n      left: 50%;\n      top: 50%;\n      transform: translate(-50%, -50%);\n      z-index: 9999;\n      box-shadow: 0px 54px 200px rgba(36, 37, 57, 0.2);\n      display: flex;\n      flex-flow: column nowrap;\n      justify-content: flex-start;\n      align-items: center;\n      padding: 35px;\n      border-radius: 8px;\n      background: #fff;\n\n      box-sizing: border-box;\n    }\n\n    .close-modal * {\n      box-sizing: border-box;\n    }\n\n    .close-modal__text {\n      margin: 40px auto 30px;\n      font-weight: 600;\n      font-size: 24px;\n      line-height: 36px;\n      text-align: center;\n\n      color: #242539;\n    }\n\n    .close-modal__button-container {\n      width: 318px;\n      display: flex;\n      flex-flow: row nowrap;\n      justify-content: space-between;\n      align-items: center;\n    }\n\n    .close-modal__button {\n      background: #fff;\n      border: 2px solid #EDEEF3;\n      border-radius: 74px;\n      width: 152px;\n      height: 56px;\n      cursor: pointer;\n      font-weight: 600;\n      font-size: 14px;\n      line-height: 21px;\n      color: #2B2D56;\n      text-transform: uppercase;\n    }\n\n    .close-modal__button--exit {\n      background: #DD3E56;\n      box-shadow: 0px 8px 34px rgba(221, 62, 86, 0.4);\n      color: #fff;\n      border-color: transparent;\n    }\n  `;\n\n  return styles;\n}\n","import { clearAllBodyScrollLocks, disableBodyScroll } from 'body-scroll-lock';\nimport { getBaseUrl, hideWebsiteBelow } from './init-helpers';\nimport { SDK_VERSION, SEND_CRYPTO_SUPPORTED_VERSION } from './consts';\n\nimport {\n  areUrlsEqual,\n  importFonts,\n  initDOMNodeWithoutOverlay,\n  initDOMNodeWithOverlay,\n  initWidgetIframeUrl,\n  isCloseModalAlreadyOpen,\n  prepareCloseModalNode,\n} from './init-helpers';\n\nimport {\n  IHostConfig,\n  IHostConfigWithSdkParams,\n  InternalEventTypes,\n  InternalSdkEventTypes,\n  IRequestCryptoAccountEvent,\n  TAllEvents,\n  TAllEventTypes,\n  TEventListenerDict,\n  TOnRequestCryptoAccountCallback,\n  IOnRequestCryptoAccountResult,\n  TSdkEvents,\n  TWidgetEvents,\n  WidgetEventTypes,\n  TOnSendCryptoCallback,\n  ISendCryptoEvent,\n  IOnSendCryptoResult,\n} from './types';\n\nimport {\n  determineWidgetVariant,\n  getRandomIntString,\n  initEventListenersDict,\n  isHtmlElement,\n  normalizeConfigAndLogErrorsOnInvalidFields,\n} from './utils';\n\nexport {\n  IWidgetCloseEvent as WidgetCloseEvent,\n  IWidgetCloseRequestCancelledEvent as WidgetCloseRequestCancelledEvent,\n  IWidgetCloseRequestConfirmedEvent as WidgetCloseRequestConfirmedEvent,\n  IWidgetCloseRequestEvent as WidgetCloseRequestEvent,\n  IWidgetConfigDoneEvent as WidgetConfigDoneEvent,\n  IWidgetEvent as RampInstantEvent,\n  TWidgetEvents as RampInstantEvents,\n  WidgetEventTypes as RampInstantEventTypes,\n  AllWidgetVariants as RampInstantWidgetVariantTypes,\n  IPurchase as RampInstantPurchase,\n} from './types';\n\nexport class RampInstantSDK {\n  public widgetWindow?: Window;\n  public domNodes?: {\n    body: HTMLBodyElement | null;\n    iframe: HTMLIFrameElement;\n    overlay: HTMLDivElement | null;\n    shadowHost: HTMLDivElement;\n    shadow: ShadowRoot;\n  };\n\n  private _config: IHostConfigWithSdkParams;\n  private _rawNormalizedConfig: IHostConfig;\n  private _listeners: TEventListenerDict = initEventListenersDict();\n  private _isVisible: boolean = false;\n  private _onSendCryptoCallback: TOnSendCryptoCallback | undefined = undefined;\n\n  constructor(config: IHostConfig) {\n    importFonts();\n\n    this.unsubscribe = this.unsubscribe.bind(this);\n    this.on = this.on.bind(this);\n    this.show = this.show.bind(this);\n    this._handleEscapeClick = this._handleEscapeClick.bind(this);\n    this._dispatchEvent = this._dispatchEvent.bind(this);\n    this._subscribeToWidgetEvents = this._subscribeToWidgetEvents.bind(this);\n    this._on = this._on.bind(this);\n    this._registerSdkEventHandlers = this._registerSdkEventHandlers.bind(this);\n    this._subscribeToWidgetEvents = this._subscribeToWidgetEvents.bind(this);\n    this._onSendCrypto = this._onSendCrypto.bind(this);\n\n    this._rawNormalizedConfig = normalizeConfigAndLogErrorsOnInvalidFields({\n      variant: 'desktop',\n      ...config,\n    });\n\n    this._config = {\n      ...this._rawNormalizedConfig,\n      ...this._getHostConfigSdkParams(this._rawNormalizedConfig, config.useSendCryptoCallback),\n    };\n  }\n\n  public show(): RampInstantSDK {\n    if (this._isVisible) {\n      throw new Error('Widget is already visible - you can only call this once per instance');\n    }\n\n    if (document.activeElement && isHtmlElement(document.activeElement)) {\n      document.activeElement.blur();\n    }\n\n    this._registerSdkEventHandlers();\n\n    window.addEventListener('message', this._subscribeToWidgetEvents);\n\n    if (this._isConfiguredAsHosted()) {\n      this._showUsingHostedMode();\n    } else if (this._isConfiguredAsEmbedded()) {\n      this._showUsingEmbeddedMode();\n    } else if (this._isConfiguredWithOverlay()) {\n      this._showUsingOverlayMode();\n    }\n\n    window.addEventListener('keydown', this._handleEscapeClick, true);\n\n    return this;\n  }\n\n  public on<T extends TAllEvents>(\n    type: T['type'] | '*',\n    callback: (event: T) => any\n  ): RampInstantSDK {\n    this._on(type, callback, false);\n\n    return this;\n  }\n\n  public unsubscribe(\n    type: TAllEvents['type'] | '*',\n    callback: (event: TAllEvents) => any\n  ): RampInstantSDK {\n    if (type === '*') {\n      const allTypes = Object.entries(this._listeners);\n\n      allTypes.forEach(([key, eventHandlers]) => {\n        const filteredHandlers = eventHandlers.filter((l) => l.callback !== callback);\n        this._listeners[key as TAllEventTypes] = filteredHandlers;\n      });\n    } else {\n      this._listeners[type] = this._listeners[type].filter((l) => l.callback !== callback);\n    }\n\n    return this;\n  }\n\n  public _on<T extends TAllEvents>(\n    type: T['type'] | '*',\n    callback: (event: T) => any,\n    internal: boolean\n  ): void {\n    if (type !== '*' && !this._listeners[type]) {\n      // tslint:disable-next-line:no-console\n      console.warn(\n        `Unknown / unsupported event name - '${type}'. This listener will have no effect.`\n      );\n    }\n\n    if (type === '*') {\n      const allTypes = Object.values(this._listeners);\n      allTypes.forEach((eventHandlers) => eventHandlers.push({ callback, internal }));\n    } else {\n      this._listeners[type].push({ callback, internal });\n    }\n  }\n\n  public close(): RampInstantSDK {\n    this._dispatchEvent({\n      type: WidgetEventTypes.WIDGET_CLOSE,\n      payload: null,\n      widgetInstanceId: this._config.widgetInstanceId,\n    });\n\n    return this;\n  }\n\n  public onSendCrypto(callback: TOnSendCryptoCallback): RampInstantSDK {\n    this._onSendCryptoCallback = callback;\n    return this;\n  }\n\n  public onRequestCryptoAccount(callback: TOnRequestCryptoAccountCallback): RampInstantSDK {\n    const onRequestCryptoAccount = async (event: IRequestCryptoAccountEvent) => {\n      let result: IOnRequestCryptoAccountResult;\n      try {\n        result = await callback(event.payload.type, event.payload.assetSymbol);\n        if (!result.address) {\n          throw new Error('Missing address in the callback result');\n        }\n      } catch (e) {\n        let errorMessage: string | undefined;\n        if (typeof e === 'string') {\n          errorMessage = e;\n        } else if (e instanceof Error) {\n          errorMessage = e.message;\n        }\n        this._sendEventToWidget({\n          type: InternalSdkEventTypes.REQUEST_CRYPTO_ACCOUNT_RESULT,\n          payload: {\n            error: errorMessage,\n          },\n        });\n        return;\n      }\n\n      this._sendEventToWidget({\n        type: InternalSdkEventTypes.REQUEST_CRYPTO_ACCOUNT_RESULT,\n        payload: {\n          address: result.address,\n          type: result.type,\n          name: result.name,\n          assetSymbol: result.assetSymbol,\n        },\n      });\n    };\n\n    this._on(InternalEventTypes.REQUEST_CRYPTO_ACCOUNT, onRequestCryptoAccount, true);\n\n    return this;\n  }\n\n  private _subscribeToWidgetEvents(event: MessageEvent): void {\n    if (!event.data) {\n      return;\n    }\n\n    if (!areUrlsEqual(event.origin, getBaseUrl(this._config).origin)) {\n      return;\n    }\n\n    const eventData = event.data as TWidgetEvents;\n\n    if (\n      !eventData.widgetInstanceId ||\n      eventData.widgetInstanceId !== this._config.widgetInstanceId\n    ) {\n      return;\n    }\n\n    this._dispatchEvent(eventData);\n  }\n\n  private _registerSdkEventHandlers(): void {\n    this._on(\n      WidgetEventTypes.WIDGET_CLOSE,\n      (_event) => {\n        if (this._isConfiguredAsHosted()) {\n          try {\n            this.widgetWindow?.close();\n          } catch (e) {\n            throw new Error('Could not close the widget window');\n          }\n        } else {\n          this.domNodes?.shadowHost.remove();\n          clearAllBodyScrollLocks();\n        }\n\n        this._teardownEventSubscriptions();\n      },\n      true\n    );\n\n    const onConfigEvent = () => {\n      if (this._isConfiguredAsHosted()) {\n        return;\n      }\n\n      this.domNodes?.iframe.classList.add('visible');\n\n      const loader = this.domNodes?.shadow.querySelector('.loader-container');\n\n      if (loader) {\n        loader.remove();\n      }\n    };\n\n    if (this._config.useSendCryptoCallbackVersion) {\n      this.on(InternalEventTypes.SEND_CRYPTO, this._onSendCrypto);\n    }\n\n    this._on(WidgetEventTypes.WIDGET_CONFIG_DONE, onConfigEvent, true);\n    this._on(WidgetEventTypes.WIDGET_CONFIG_FAILED, onConfigEvent, true);\n\n    this._on(\n      InternalEventTypes.WIDGET_CLOSE_REQUEST,\n      (_event) => {\n        if (this._isConfiguredAsHosted() || this._isConfiguredAsEmbedded()) {\n          return;\n        }\n\n        if (this._config.variant === 'mobile' || isCloseModalAlreadyOpen(this.domNodes!.overlay!)) {\n          return;\n        }\n\n        this.domNodes!.overlay!.appendChild(prepareCloseModalNode(this._dispatchEvent));\n      },\n      true\n    );\n\n    this._on(\n      InternalEventTypes.WIDGET_CLOSE_REQUEST_CONFIRMED,\n      (_event) => {\n        this._dispatchEvent({\n          type: WidgetEventTypes.WIDGET_CLOSE,\n          payload: null,\n          widgetInstanceId: this._config.widgetInstanceId,\n        });\n      },\n      true\n    );\n\n    this._on(\n      InternalEventTypes.WIDGET_CLOSE_REQUEST_CANCELLED,\n      (_event) => {\n        if (this._isConfiguredAsHosted() || this._isConfiguredAsEmbedded()) {\n          return;\n        }\n\n        const modal = this.domNodes!.overlay!.querySelector('.close-modal');\n\n        if (modal) {\n          modal.remove();\n        }\n      },\n      true\n    );\n  }\n\n  private _sendEventToWidget(event: TSdkEvents): void {\n    if (!this._isVisible) {\n      throw new Error(`Widget is not visible couldn't send the event`);\n    }\n    try {\n      (this.widgetWindow ?? this.domNodes?.iframe.contentWindow)?.postMessage(\n        event,\n        getBaseUrl(this._config).origin\n      );\n      // tslint:disable-next-line:no-empty\n    } catch {}\n  }\n\n  private _dispatchEvent(event: TAllEvents): void {\n    const { type } = event;\n\n    this._listeners[type].forEach((handler) => handler.callback(event));\n  }\n\n  private _handleEscapeClick(event: KeyboardEvent): void {\n    const escKeyCode = 27;\n\n    if (event.key === 'Escape' || event.key === 'Esc' || event.keyCode === escKeyCode) {\n      this._dispatchEvent({\n        type: InternalEventTypes.WIDGET_CLOSE_REQUEST,\n        payload: null,\n        internal: true,\n      });\n    }\n  }\n\n  private async _onSendCrypto(event: ISendCryptoEvent): Promise<void> {\n    let result: IOnSendCryptoResult | undefined;\n    if (event.eventVersion !== SEND_CRYPTO_SUPPORTED_VERSION) {\n      // tslint:disable-next-line:no-console\n      console.warn(`unsupported event version - '${event}'. This listener will have no effect.`);\n      return;\n    }\n    try {\n      result = await this._onSendCryptoCallback?.(\n        event.payload.assetInfo,\n        event.payload.amount,\n        event.payload.address\n      );\n      if (!result?.txHash) {\n        throw new Error('Missing txHash in the callback result');\n      }\n    } catch (e) {\n      let errorMessage: string | undefined;\n      if (typeof e === 'string') {\n        errorMessage = e;\n      } else if (e instanceof Error) {\n        errorMessage = e.message;\n      }\n      this._sendEventToWidget({\n        eventVersion: SEND_CRYPTO_SUPPORTED_VERSION,\n        type: InternalSdkEventTypes.SEND_CRYPTO_RESULT,\n        payload: {\n          error: errorMessage,\n        },\n      });\n      return;\n    }\n\n    this._sendEventToWidget({\n      eventVersion: SEND_CRYPTO_SUPPORTED_VERSION,\n      type: InternalSdkEventTypes.SEND_CRYPTO_RESULT,\n      payload: {\n        txHash: result.txHash,\n      },\n    });\n  }\n\n  // Event subscriptions aren't cleared so that host can receive a PAYMENT_SUCCESSFUL event\n  // even after the widget has been closed\n  private _teardownEventSubscriptions(): void {\n    window.removeEventListener('keydown', this._handleEscapeClick, true);\n    window.removeEventListener('message', this._subscribeToWidgetEvents);\n  }\n\n  private _showUsingEmbeddedMode(): void {\n    const widgetUrl = initWidgetIframeUrl(this._config);\n\n    this.domNodes = initDOMNodeWithoutOverlay(widgetUrl, this._dispatchEvent, this._config);\n\n    if (!this.domNodes?.body) {\n      throw new Error(\"Couldn't find <body> element.\");\n    }\n\n    this._config.containerNode?.appendChild(this.domNodes.shadowHost);\n\n    this._isVisible = true;\n  }\n\n  private _showUsingOverlayMode(): void {\n    const widgetUrl = initWidgetIframeUrl(this._config);\n\n    this.domNodes = initDOMNodeWithOverlay(widgetUrl, this._dispatchEvent, this._config);\n\n    if (!this.domNodes?.body) {\n      throw new Error(\"Couldn't find <body> element.\");\n    }\n\n    this.domNodes.body.appendChild(this.domNodes.shadowHost);\n\n    this._isVisible = true;\n\n    disableBodyScroll(this.domNodes.iframe);\n\n    const widgetMode = determineWidgetVariant(this._config);\n\n    if (widgetMode !== 'desktop' && widgetMode !== 'embedded-desktop') {\n      hideWebsiteBelow(this.domNodes.shadow);\n    }\n  }\n\n  private _showUsingHostedMode(): void {\n    const widgetUrl = initWidgetIframeUrl(this._config);\n\n    this.widgetWindow = window.open(widgetUrl) ?? undefined;\n  }\n\n  private _isConfiguredWithOverlay(): boolean {\n    return ['desktop', 'mobile'].includes(this._config.variant);\n  }\n\n  private _isConfiguredAsHosted(): boolean {\n    return ['hosted-desktop', 'hosted-mobile'].includes(this._config.variant);\n  }\n\n  private _isConfiguredAsEmbedded(): boolean {\n    return ['embedded-desktop', 'embedded-mobile'].includes(this._rawNormalizedConfig.variant!);\n  }\n\n  private _getHostConfigSdkParams(\n    config: IHostConfig,\n    useSendCryptoCallback?: boolean\n  ): Pick<\n    IHostConfigWithSdkParams,\n    'sdkType' | 'sdkVersion' | 'variant' | 'widgetInstanceId' | 'useSendCryptoCallbackVersion'\n  > {\n    const widgetVariant = determineWidgetVariant(config);\n\n    return {\n      sdkType: 'WEB',\n      sdkVersion: SDK_VERSION,\n      variant: widgetVariant,\n      widgetInstanceId: getRandomIntString(),\n      ...(useSendCryptoCallback\n        ? { useSendCryptoCallbackVersion: SEND_CRYPTO_SUPPORTED_VERSION }\n        : {}),\n    };\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}